{"data":"aW1wb3J0IHsgbXV0YXRpb24sIHF1ZXJ5IH0gZnJvbSAiLi9fZ2VuZXJhdGVkL3NlcnZlciI7DQppbXBvcnQgeyB2IH0gZnJvbSAiY29udmV4L3ZhbHVlcyI7DQppbXBvcnQgeyBpc1VzZXJQcmVtaXVtIH0gZnJvbSAiLi9zdWJzY3JpcHRpb25zIjsNCg0KY29uc3QgZGVmYXVsdFNldHRpbmdzID0gew0KICBzaG93T25saW5lU3RhdHVzOiB0cnVlLA0KICByZWFkUmVjZWlwdHM6IHRydWUsDQogIGVtYWlsTm90aWZpY2F0aW9uczogdHJ1ZSwNCiAgbWF0Y2hOb3RpZmljYXRpb25zOiB0cnVlLA0KICBtZXNzYWdlTm90aWZpY2F0aW9uczogdHJ1ZSwNCn07DQoNCmV4cG9ydCBjb25zdCBnZXRNeVNldHRpbmdzID0gcXVlcnkoew0KICBhcmdzOiB7DQogICAgdXNlcklkOiB2LmlkKCJ1c2VycyIpLA0KICB9LA0KICBoYW5kbGVyOiBhc3luYyAoY3R4LCBhcmdzKSA9PiB7DQogICAgY29uc3Qgc2V0dGluZ3MgPSBhd2FpdCBjdHguZGINCiAgICAgIC5xdWVyeSgidXNlclNldHRpbmdzIikNCiAgICAgIC53aXRoSW5kZXgoInVzZXJJZCIsIChxKSA9PiBxLmVxKCJ1c2VySWQiLCBhcmdzLnVzZXJJZCkpDQogICAgICAuZmlyc3QoKTsNCg0KICAgIGlmICghc2V0dGluZ3MpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIC4uLmRlZmF1bHRTZXR0aW5ncywNCiAgICAgICAgdXNlcklkOiBhcmdzLnVzZXJJZCwNCiAgICAgIH07DQogICAgfQ0KDQogICAgcmV0dXJuIHNldHRpbmdzOw0KICB9LA0KfSk7DQoNCmV4cG9ydCBjb25zdCB1cGRhdGVNeVNldHRpbmdzID0gbXV0YXRpb24oew0KICBhcmdzOiB7DQogICAgdXNlcklkOiB2LmlkKCJ1c2VycyIpLA0KICAgIHNob3dPbmxpbmVTdGF0dXM6IHYub3B0aW9uYWwodi5ib29sZWFuKCkpLA0KICAgIHJlYWRSZWNlaXB0czogdi5vcHRpb25hbCh2LmJvb2xlYW4oKSksDQogICAgZW1haWxOb3RpZmljYXRpb25zOiB2Lm9wdGlvbmFsKHYuYm9vbGVhbigpKSwNCiAgICBtYXRjaE5vdGlmaWNhdGlvbnM6IHYub3B0aW9uYWwodi5ib29sZWFuKCkpLA0KICAgIG1lc3NhZ2VOb3RpZmljYXRpb25zOiB2Lm9wdGlvbmFsKHYuYm9vbGVhbigpKSwNCiAgfSwNCiAgaGFuZGxlcjogYXN5bmMgKGN0eCwgYXJncykgPT4gew0KICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgY3R4LmRiDQogICAgICAucXVlcnkoInVzZXJTZXR0aW5ncyIpDQogICAgICAud2l0aEluZGV4KCJ1c2VySWQiLCAocSkgPT4gcS5lcSgidXNlcklkIiwgYXJncy51c2VySWQpKQ0KICAgICAgLmZpcnN0KCk7DQoNCiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpOw0KDQogICAgY29uc3QgdXBkYXRlczogYW55ID0gew0KICAgICAgdXBkYXRlZEF0OiBub3csDQogICAgfTsNCg0KICAgIGlmIChhcmdzLnNob3dPbmxpbmVTdGF0dXMgIT09IHVuZGVmaW5lZCkgdXBkYXRlcy5zaG93T25saW5lU3RhdHVzID0gYXJncy5zaG93T25saW5lU3RhdHVzOw0KICAgIGlmIChhcmdzLnJlYWRSZWNlaXB0cyAhPT0gdW5kZWZpbmVkKSB7DQogICAgICBjb25zdCBwcmVtaXVtID0gYXdhaXQgaXNVc2VyUHJlbWl1bShjdHgsIGFyZ3MudXNlcklkKTsNCiAgICAgIGlmICghcHJlbWl1bSkgew0KICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlJlYWQgcmVjZWlwdHMgYXJlIGEgUHJlbWl1bSBmZWF0dXJlIik7DQogICAgICB9DQogICAgICB1cGRhdGVzLnJlYWRSZWNlaXB0cyA9IGFyZ3MucmVhZFJlY2VpcHRzOw0KICAgIH0NCiAgICBpZiAoYXJncy5lbWFpbE5vdGlmaWNhdGlvbnMgIT09IHVuZGVmaW5lZCkgdXBkYXRlcy5lbWFpbE5vdGlmaWNhdGlvbnMgPSBhcmdzLmVtYWlsTm90aWZpY2F0aW9uczsNCiAgICBpZiAoYXJncy5tYXRjaE5vdGlmaWNhdGlvbnMgIT09IHVuZGVmaW5lZCkgdXBkYXRlcy5tYXRjaE5vdGlmaWNhdGlvbnMgPSBhcmdzLm1hdGNoTm90aWZpY2F0aW9uczsNCiAgICBpZiAoYXJncy5tZXNzYWdlTm90aWZpY2F0aW9ucyAhPT0gdW5kZWZpbmVkKSB1cGRhdGVzLm1lc3NhZ2VOb3RpZmljYXRpb25zID0gYXJncy5tZXNzYWdlTm90aWZpY2F0aW9uczsNCg0KICAgIGlmIChleGlzdGluZykgew0KICAgICAgYXdhaXQgY3R4LmRiLnBhdGNoKGV4aXN0aW5nLl9pZCwgdXBkYXRlcyk7DQogICAgICByZXR1cm4gZXhpc3RpbmcuX2lkOw0KICAgIH0NCg0KICAgIGNvbnN0IGlkID0gYXdhaXQgY3R4LmRiLmluc2VydCgidXNlclNldHRpbmdzIiwgew0KICAgICAgdXNlcklkOiBhcmdzLnVzZXJJZCwNCiAgICAgIC4uLmRlZmF1bHRTZXR0aW5ncywNCiAgICAgIC4uLnVwZGF0ZXMsDQogICAgfSk7DQoNCiAgICByZXR1cm4gaWQ7DQogIH0sDQp9KTsNCg=="}