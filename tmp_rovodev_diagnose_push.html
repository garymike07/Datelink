{"data":"PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+UHVzaCBOb3RpZmljYXRpb24gRGlhZ25vc3RpY3M8L3RpdGxlPgogICAgPHN0eWxlPgogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogJ1NlZ29lIFVJJywgVGFob21hLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIG1heC13aWR0aDogODAwcHg7CiAgICAgICAgICAgIG1hcmdpbjogMjBweCBhdXRvOwogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjVmN2ZhOwogICAgICAgIH0KICAgICAgICAuY29udGFpbmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7CiAgICAgICAgICAgIHBhZGRpbmc6IDMwcHg7CiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDZweCByZ2JhKDAsMCwwLDAuMSk7CiAgICAgICAgfQogICAgICAgIGgxIHsKICAgICAgICAgICAgY29sb3I6ICMyYzNlNTA7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgICAgfQogICAgICAgIC5sb2cgewogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjMWUxZTFlOwogICAgICAgICAgICBjb2xvcjogI2Q0ZDRkNDsKICAgICAgICAgICAgcGFkZGluZzogMjBweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogOHB4OwogICAgICAgICAgICBmb250LWZhbWlseTogJ0NvdXJpZXIgTmV3JywgbW9ub3NwYWNlOwogICAgICAgICAgICBmb250LXNpemU6IDEzcHg7CiAgICAgICAgICAgIG1heC1oZWlnaHQ6IDUwMHB4OwogICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvOwogICAgICAgICAgICBtYXJnaW46IDIwcHggMDsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDEuNjsKICAgICAgICB9CiAgICAgICAgLmxvZy1lbnRyeSB7CiAgICAgICAgICAgIG1hcmdpbjogOHB4IDA7CiAgICAgICAgICAgIHBhZGRpbmc6IDZweDsKICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjNTU1OwogICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDEycHg7CiAgICAgICAgfQogICAgICAgIC5sb2ctZW50cnkuaW5mbyB7IGJvcmRlci1jb2xvcjogIzM0OThkYjsgY29sb3I6ICM2MWRhZmI7IH0KICAgICAgICAubG9nLWVudHJ5LnN1Y2Nlc3MgeyBib3JkZXItY29sb3I6ICMyZWNjNzE7IGNvbG9yOiAjNGFkZTgwOyB9CiAgICAgICAgLmxvZy1lbnRyeS5lcnJvciB7IGJvcmRlci1jb2xvcjogI2U3NGMzYzsgY29sb3I6ICNmODcxNzE7IH0KICAgICAgICAubG9nLWVudHJ5Lndhcm4geyBib3JkZXItY29sb3I6ICNmMzljMTI7IGNvbG9yOiAjZmJiZjI0OyB9CiAgICAgICAgYnV0dG9uIHsKICAgICAgICAgICAgYmFja2dyb3VuZDogIzM0OThkYjsKICAgICAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICAgIHBhZGRpbmc6IDEycHggMjRweDsKICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4OwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICAgICAgbWFyZ2luOiA1cHg7CiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4zczsKICAgICAgICB9CiAgICAgICAgYnV0dG9uOmhvdmVyIHsgYmFja2dyb3VuZDogIzI5ODBiOTsgfQogICAgICAgIGJ1dHRvbjpkaXNhYmxlZCB7CiAgICAgICAgICAgIGJhY2tncm91bmQ6ICM5NWE1YTY7CiAgICAgICAgICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7CiAgICAgICAgfQogICAgICAgIC5zdGF0dXMtYmFkZ2UgewogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgIHBhZGRpbmc6IDRweCAxMnB4OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMnB4OwogICAgICAgICAgICBmb250LXNpemU6IDEycHg7CiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7CiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4OwogICAgICAgIH0KICAgICAgICAuc3RhdHVzLWJhZGdlLm9rIHsgYmFja2dyb3VuZDogI2Q0ZWRkYTsgY29sb3I6ICMxNTU3MjQ7IH0KICAgICAgICAuc3RhdHVzLWJhZGdlLmZhaWwgeyBiYWNrZ3JvdW5kOiAjZjhkN2RhOyBjb2xvcjogIzcyMWMyNDsgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KICAgIDxkaXYgY2xhc3M9ImNvbnRhaW5lciI+CiAgICAgICAgPGgxPvCflI0gUHVzaCBOb3RpZmljYXRpb24gRGlhZ25vc3RpY3M8L2gxPgogICAgICAgIDxwPlRoaXMgdG9vbCB3aWxsIGhlbHAgZGlhZ25vc2Ugd2h5IHB1c2ggbm90aWZpY2F0aW9ucyBhcmUgZmFpbGluZy48L3A+CiAgICAgICAgCiAgICAgICAgPGRpdj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJydW5GdWxsRGlhZ25vc3RpY3MoKSI+UnVuIEZ1bGwgRGlhZ25vc3RpY3M8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJ0ZXN0U3Vic2NyaWJlKCkiPlRlc3QgU3Vic2NyaWJlPC9idXR0b24+CiAgICAgICAgICAgIDxidXR0b24gb25jbGljaz0iY2xlYXJMb2coKSI+Q2xlYXIgTG9nPC9idXR0b24+CiAgICAgICAgPC9kaXY+CiAgICAgICAgCiAgICAgICAgPGRpdiBpZD0ibG9nIiBjbGFzcz0ibG9nIj48L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxzY3JpcHQ+CiAgICAgICAgY29uc3QgVkFQSURfUFVCTElDX0tFWSA9ICdCT1BKaUV4Q0dWcDVNYmkxTXI3SHpjbjJIUlZYMko3Q0t2WVFXUzVCbzB2cHZmSmhSbjA5Z19sLXpNZ20zYjFqWUhuQ0IwblBoLTV6RjZnSHJkN00wQmMnOwogICAgICAgIAogICAgICAgIGZ1bmN0aW9uIGxvZyhtZXNzYWdlLCB0eXBlID0gJ2luZm8nKSB7CiAgICAgICAgICAgIGNvbnN0IGxvZ0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsb2cnKTsKICAgICAgICAgICAgY29uc3QgZW50cnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgZW50cnkuY2xhc3NOYW1lID0gYGxvZy1lbnRyeSAke3R5cGV9YDsKICAgICAgICAgICAgZW50cnkudGV4dENvbnRlbnQgPSBgWyR7bmV3IERhdGUoKS50b0xvY2FsZVRpbWVTdHJpbmcoKX1dICR7bWVzc2FnZX1gOwogICAgICAgICAgICBsb2dEaXYuYXBwZW5kQ2hpbGQoZW50cnkpOwogICAgICAgICAgICBsb2dEaXYuc2Nyb2xsVG9wID0gbG9nRGl2LnNjcm9sbEhlaWdodDsKICAgICAgICAgICAgY29uc29sZS5sb2coYFske3R5cGUudG9VcHBlckNhc2UoKX1dICR7bWVzc2FnZX1gKTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIGNsZWFyTG9nKCkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9nJykuaW5uZXJIVE1MID0gJyc7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cmxCYXNlNjRUb1VpbnQ4QXJyYXkoYmFzZTY0U3RyaW5nKSB7CiAgICAgICAgICAgIGNvbnN0IHBhZGRpbmcgPSAnPScucmVwZWF0KCg0IC0gKGJhc2U2NFN0cmluZy5sZW5ndGggJSA0KSkgJSA0KTsKICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gKGJhc2U2NFN0cmluZyArIHBhZGRpbmcpCiAgICAgICAgICAgICAgICAucmVwbGFjZSgvLS9nLCAnKycpCiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXy9nLCAnLycpOwogICAgICAgICAgICBjb25zdCByYXdEYXRhID0gd2luZG93LmF0b2IoYmFzZTY0KTsKICAgICAgICAgICAgY29uc3Qgb3V0cHV0QXJyYXkgPSBuZXcgVWludDhBcnJheShyYXdEYXRhLmxlbmd0aCk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmF3RGF0YS5sZW5ndGg7ICsraSkgewogICAgICAgICAgICAgICAgb3V0cHV0QXJyYXlbaV0gPSByYXdEYXRhLmNoYXJDb2RlQXQoaSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIG91dHB1dEFycmF5OwogICAgICAgIH0KCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcnVuRnVsbERpYWdub3N0aWNzKCkgewogICAgICAgICAgICBjbGVhckxvZygpOwogICAgICAgICAgICBsb2coJ/CfmoAgU3RhcnRpbmcgZnVsbCBkaWFnbm9zdGljcy4uLicsICdpbmZvJyk7CiAgICAgICAgICAgIGxvZygnJywgJ2luZm8nKTsKCiAgICAgICAgICAgIC8vIENoZWNrIDE6IEJyb3dzZXIgU3VwcG9ydAogICAgICAgICAgICBsb2coJz09PSBTVEVQIDE6IEJyb3dzZXIgU3VwcG9ydCA9PT0nLCAnaW5mbycpOwogICAgICAgICAgICBjb25zdCBoYXNTZXJ2aWNlV29ya2VyID0gJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcjsKICAgICAgICAgICAgbG9nKGBTZXJ2aWNlIFdvcmtlcjogJHtoYXNTZXJ2aWNlV29ya2VyID8gJ+KchSBTdXBwb3J0ZWQnIDogJ+KdjCBOb3QgU3VwcG9ydGVkJ31gLCBoYXNTZXJ2aWNlV29ya2VyID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCBoYXNQdXNoTWFuYWdlciA9ICdQdXNoTWFuYWdlcicgaW4gd2luZG93OwogICAgICAgICAgICBsb2coYFB1c2ggTWFuYWdlcjogJHtoYXNQdXNoTWFuYWdlciA/ICfinIUgU3VwcG9ydGVkJyA6ICfinYwgTm90IFN1cHBvcnRlZCd9YCwgaGFzUHVzaE1hbmFnZXIgPyAnc3VjY2VzcycgOiAnZXJyb3InKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGNvbnN0IGhhc05vdGlmaWNhdGlvbiA9ICdOb3RpZmljYXRpb24nIGluIHdpbmRvdzsKICAgICAgICAgICAgbG9nKGBOb3RpZmljYXRpb25zOiAke2hhc05vdGlmaWNhdGlvbiA/ICfinIUgU3VwcG9ydGVkJyA6ICfinYwgTm90IFN1cHBvcnRlZCd9YCwgaGFzTm90aWZpY2F0aW9uID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoIWhhc1NlcnZpY2VXb3JrZXIgfHwgIWhhc1B1c2hNYW5hZ2VyIHx8ICFoYXNOb3RpZmljYXRpb24pIHsKICAgICAgICAgICAgICAgIGxvZygn4p2MIEJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBwdXNoIG5vdGlmaWNhdGlvbnMnLCAnZXJyb3InKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBsb2coJycsICdpbmZvJyk7CgogICAgICAgICAgICAvLyBDaGVjayAyOiBOb3RpZmljYXRpb24gUGVybWlzc2lvbgogICAgICAgICAgICBsb2coJz09PSBTVEVQIDI6IE5vdGlmaWNhdGlvbiBQZXJtaXNzaW9uID09PScsICdpbmZvJyk7CiAgICAgICAgICAgIGxvZyhgQ3VycmVudCBwZXJtaXNzaW9uOiAke05vdGlmaWNhdGlvbi5wZXJtaXNzaW9ufWAsICdpbmZvJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gPT09ICdkZW5pZWQnKSB7CiAgICAgICAgICAgICAgICBsb2coJ+KdjCBOb3RpZmljYXRpb24gcGVybWlzc2lvbiBpcyBERU5JRUQuIFlvdSBuZWVkIHRvIHJlc2V0IHNpdGUgcGVybWlzc2lvbnMgaW4gYnJvd3NlciBzZXR0aW5ncy4nLCAnZXJyb3InKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uICE9PSAnZ3JhbnRlZCcpIHsKICAgICAgICAgICAgICAgIGxvZygn4pqg77iPICBSZXF1ZXN0aW5nIHBlcm1pc3Npb24uLi4nLCAnd2FybicpOwogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwZXJtaXNzaW9uID0gYXdhaXQgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7CiAgICAgICAgICAgICAgICAgICAgbG9nKGBQZXJtaXNzaW9uIHJlc3VsdDogJHtwZXJtaXNzaW9ufWAsIHBlcm1pc3Npb24gPT09ICdncmFudGVkJyA/ICdzdWNjZXNzJyA6ICdlcnJvcicpOwogICAgICAgICAgICAgICAgICAgIGlmIChwZXJtaXNzaW9uICE9PSAnZ3JhbnRlZCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9nKCfinYwgUGVybWlzc2lvbiBub3QgZ3JhbnRlZCcsICdlcnJvcicpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICBsb2coYOKdjCBQZXJtaXNzaW9uIHJlcXVlc3QgZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ2Vycm9yJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbG9nKCfinIUgUGVybWlzc2lvbiBhbHJlYWR5IGdyYW50ZWQnLCAnc3VjY2VzcycpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxvZygnJywgJ2luZm8nKTsKCiAgICAgICAgICAgIC8vIENoZWNrIDM6IFZBUElEIEtleQogICAgICAgICAgICBsb2coJz09PSBTVEVQIDM6IFZBUElEIENvbmZpZ3VyYXRpb24gPT09JywgJ2luZm8nKTsKICAgICAgICAgICAgbG9nKGBWQVBJRCBLZXk6ICR7VkFQSURfUFVCTElDX0tFWS5zdWJzdHJpbmcoMCwgNDApfS4uLmAsICdpbmZvJyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoVkFQSURfUFVCTElDX0tFWSA9PT0gJ1BMQUNFSE9MREVSX1ZBUElEX0tFWScgfHwgIVZBUElEX1BVQkxJQ19LRVkpIHsKICAgICAgICAgICAgICAgIGxvZygn4p2MIFZBUElEIGtleSBpcyBub3QgY29uZmlndXJlZCEnLCAnZXJyb3InKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGtleUFycmF5ID0gdXJsQmFzZTY0VG9VaW50OEFycmF5KFZBUElEX1BVQkxJQ19LRVkpOwogICAgICAgICAgICAgICAgbG9nKGDinIUgVkFQSUQga2V5IGRlY29kZWQgc3VjY2Vzc2Z1bGx5ICgke2tleUFycmF5Lmxlbmd0aH0gYnl0ZXMpYCwgJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGxvZyhg4p2MIEludmFsaWQgVkFQSUQga2V5IGZvcm1hdDogJHtlcnJvci5tZXNzYWdlfWAsICdlcnJvcicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxvZygnJywgJ2luZm8nKTsKCiAgICAgICAgICAgIC8vIENoZWNrIDQ6IFNlcnZpY2UgV29ya2VyIFJlZ2lzdHJhdGlvbgogICAgICAgICAgICBsb2coJz09PSBTVEVQIDQ6IFNlcnZpY2UgV29ya2VyIFJlZ2lzdHJhdGlvbiA9PT0nLCAnaW5mbycpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgbG9nKCdSZWdpc3RlcmluZyBzZXJ2aWNlIHdvcmtlci4uLicsICdpbmZvJyk7CiAgICAgICAgICAgICAgICBjb25zdCByZWdpc3RyYXRpb24gPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignL3N3LmpzJywgewogICAgICAgICAgICAgICAgICAgIHNjb3BlOiAnLycKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgbG9nKGDinIUgU2VydmljZSB3b3JrZXIgcmVnaXN0ZXJlZDogJHtyZWdpc3RyYXRpb24uc2NvcGV9YCwgJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9nKCdXYWl0aW5nIGZvciBzZXJ2aWNlIHdvcmtlciB0byBiZSByZWFkeS4uLicsICdpbmZvJyk7CiAgICAgICAgICAgICAgICBjb25zdCByZWFkeVJlZ2lzdHJhdGlvbiA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5OwogICAgICAgICAgICAgICAgbG9nKCfinIUgU2VydmljZSB3b3JrZXIgaXMgcmVhZHknLCAnc3VjY2VzcycpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBDaGVjayBzZXJ2aWNlIHdvcmtlciBzdGF0ZQogICAgICAgICAgICAgICAgaWYgKHJlYWR5UmVnaXN0cmF0aW9uLmFjdGl2ZSkgewogICAgICAgICAgICAgICAgICAgIGxvZyhgU2VydmljZSB3b3JrZXIgc3RhdGU6ICR7cmVhZHlSZWdpc3RyYXRpb24uYWN0aXZlLnN0YXRlfWAsICdzdWNjZXNzJyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBsb2coYOKdjCBTZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkOiAke2Vycm9yLm1lc3NhZ2V9YCwgJ2Vycm9yJyk7CiAgICAgICAgICAgICAgICBsb2coYEVycm9yIGRldGFpbHM6ICR7SlNPTi5zdHJpbmdpZnkoZXJyb3IsIG51bGwsIDIpfWAsICdlcnJvcicpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxvZygnJywgJ2luZm8nKTsKCiAgICAgICAgICAgIC8vIENoZWNrIDU6IFB1c2ggU3Vic2NyaXB0aW9uCiAgICAgICAgICAgIGxvZygnPT09IFNURVAgNTogUHVzaCBTdWJzY3JpcHRpb24gPT09JywgJ2luZm8nKTsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5OwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgZXhpc3Rpbmcgc3Vic2NyaXB0aW9uCiAgICAgICAgICAgICAgICBsZXQgc3Vic2NyaXB0aW9uID0gYXdhaXQgcmVnaXN0cmF0aW9uLnB1c2hNYW5hZ2VyLmdldFN1YnNjcmlwdGlvbigpOwogICAgICAgICAgICAgICAgaWYgKHN1YnNjcmlwdGlvbikgewogICAgICAgICAgICAgICAgICAgIGxvZygn4pqg77iPICBGb3VuZCBleGlzdGluZyBzdWJzY3JpcHRpb24nLCAnd2FybicpOwogICAgICAgICAgICAgICAgICAgIGxvZyhgRW5kcG9pbnQ6ICR7c3Vic2NyaXB0aW9uLmVuZHBvaW50LnN1YnN0cmluZygwLCA2MCl9Li4uYCwgJ2luZm8nKTsKICAgICAgICAgICAgICAgICAgICBsb2coJ1Vuc3Vic2NyaWJpbmcgb2xkIHN1YnNjcmlwdGlvbi4uLicsICdpbmZvJyk7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7CiAgICAgICAgICAgICAgICAgICAgbG9nKCfinIUgT2xkIHN1YnNjcmlwdGlvbiByZW1vdmVkJywgJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9nKCdDcmVhdGluZyBuZXcgcHVzaCBzdWJzY3JpcHRpb24uLi4nLCAnaW5mbycpOwogICAgICAgICAgICAgICAgY29uc3QgYXBwbGljYXRpb25TZXJ2ZXJLZXkgPSB1cmxCYXNlNjRUb1VpbnQ4QXJyYXkoVkFQSURfUFVCTElDX0tFWSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IGF3YWl0IHJlZ2lzdHJhdGlvbi5wdXNoTWFuYWdlci5zdWJzY3JpYmUoewogICAgICAgICAgICAgICAgICAgIHVzZXJWaXNpYmxlT25seTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBhcHBsaWNhdGlvblNlcnZlcktleTogYXBwbGljYXRpb25TZXJ2ZXJLZXkKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBsb2coJ+KchSBQdXNoIHN1YnNjcmlwdGlvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSEnLCAnc3VjY2VzcycpOwogICAgICAgICAgICAgICAgbG9nKGBFbmRwb2ludDogJHtzdWJzY3JpcHRpb24uZW5kcG9pbnQuc3Vic3RyaW5nKDAsIDYwKX0uLi5gLCAnaW5mbycpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBzdWJKU09OID0gc3Vic2NyaXB0aW9uLnRvSlNPTigpOwogICAgICAgICAgICAgICAgbG9nKGBLZXlzIHByZXNlbnQ6IGF1dGg9JHshIXN1YkpTT04ua2V5cz8uYXV0aH0sIHAyNTZkaD0keyEhc3ViSlNPTi5rZXlzPy5wMjU2ZGh9YCwgJ3N1Y2Nlc3MnKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgbG9nKCcnLCAnaW5mbycpOwogICAgICAgICAgICAgICAgbG9nKCfwn46JIEFMTCBESUFHTk9TVElDUyBQQVNTRUQhIFB1c2ggbm90aWZpY2F0aW9ucyBzaG91bGQgd29yay4nLCAnc3VjY2VzcycpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICBsb2coYOKdjCBQdXNoIHN1YnNjcmlwdGlvbiBmYWlsZWQ6ICR7ZXJyb3IubmFtZX1gLCAnZXJyb3InKTsKICAgICAgICAgICAgICAgIGxvZyhgRXJyb3IgbWVzc2FnZTogJHtlcnJvci5tZXNzYWdlfWAsICdlcnJvcicpOwogICAgICAgICAgICAgICAgbG9nKGBFcnJvciBzdGFjazogJHtlcnJvci5zdGFja31gLCAnZXJyb3InKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdOb3RBbGxvd2VkRXJyb3InKSB7CiAgICAgICAgICAgICAgICAgICAgbG9nKCfwn5KhIFRoaXMgdXN1YWxseSBtZWFucyBwZXJtaXNzaW9uIHdhcyBkZW5pZWQgb3IgcmV2b2tlZCcsICd3YXJuJyk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm5hbWUgPT09ICdOb3RTdXBwb3J0ZWRFcnJvcicpIHsKICAgICAgICAgICAgICAgICAgICBsb2coJ/CfkqEgUHVzaCBub3RpZmljYXRpb25zIG1heSBub3QgYmUgc3VwcG9ydGVkIGluIHRoaXMgY29udGV4dCAoaHR0cCB2cyBodHRwcyknLCAnd2FybicpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnJvci5uYW1lID09PSAnSW52YWxpZFN0YXRlRXJyb3InKSB7CiAgICAgICAgICAgICAgICAgICAgbG9nKCfwn5KhIFNlcnZpY2Ugd29ya2VyIG1heSBub3QgYmUgaW4gdGhlIGNvcnJlY3Qgc3RhdGUnLCAnd2FybicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBhc3luYyBmdW5jdGlvbiB0ZXN0U3Vic2NyaWJlKCkgewogICAgICAgICAgICBjbGVhckxvZygpOwogICAgICAgICAgICBsb2coJ1Rlc3Rpbmcgc3Vic2NyaXB0aW9uIHByb2Nlc3MgKHNpbXBsaWZpZWQpLi4uJywgJ2luZm8nKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAvLyBRdWljayBwZXJtaXNzaW9uIGNoZWNrCiAgICAgICAgICAgICAgICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gIT09ICdncmFudGVkJykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBlcm1pc3Npb24gPSBhd2FpdCBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTsKICAgICAgICAgICAgICAgICAgICBpZiAocGVybWlzc2lvbiAhPT0gJ2dyYW50ZWQnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGxvZygn4p2MIFBlcm1pc3Npb24gZGVuaWVkJywgJ2Vycm9yJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIC8vIFJlZ2lzdGVyIGFuZCBzdWJzY3JpYmUKICAgICAgICAgICAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCcvc3cuanMnKTsKICAgICAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlYWR5OwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSBhd2FpdCByZWdpc3RyYXRpb24ucHVzaE1hbmFnZXIuc3Vic2NyaWJlKHsKICAgICAgICAgICAgICAgICAgICB1c2VyVmlzaWJsZU9ubHk6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgYXBwbGljYXRpb25TZXJ2ZXJLZXk6IHVybEJhc2U2NFRvVWludDhBcnJheShWQVBJRF9QVUJMSUNfS0VZKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgIGxvZygn4pyFIFN1Y2Nlc3NmdWxseSBzdWJzY3JpYmVkIScsICdzdWNjZXNzJyk7CiAgICAgICAgICAgICAgICBsb2coYEVuZHBvaW50OiAke3N1YnNjcmlwdGlvbi5lbmRwb2ludH1gLCAnaW5mbycpOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAvLyBTaG93IHRlc3Qgbm90aWZpY2F0aW9uCiAgICAgICAgICAgICAgICBhd2FpdCByZWdpc3RyYXRpb24uc2hvd05vdGlmaWNhdGlvbignVGVzdCBOb3RpZmljYXRpb24nLCB7CiAgICAgICAgICAgICAgICAgICAgYm9keTogJ1B1c2ggbm90aWZpY2F0aW9ucyBhcmUgd29ya2luZyEnLAogICAgICAgICAgICAgICAgICAgIGljb246ICcvbG9nby5zdmcnLAogICAgICAgICAgICAgICAgICAgIGJhZGdlOiAnL2Zhdmljb24uc3ZnJwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGxvZyhg4p2MIEVycm9yOiAke2Vycm9yLm5hbWV9IC0gJHtlcnJvci5tZXNzYWdlfWAsICdlcnJvcicpOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyBBdXRvLXJ1biBvbiBsb2FkCiAgICAgICAgd2luZG93Lm9ubG9hZCA9ICgpID0+IHsKICAgICAgICAgICAgbG9nKCdEaWFnbm9zdGljIHRvb2wgcmVhZHkuIENsaWNrICJSdW4gRnVsbCBEaWFnbm9zdGljcyIgdG8gc3RhcnQuJywgJ2luZm8nKTsKICAgICAgICB9OwogICAgPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPgo="}