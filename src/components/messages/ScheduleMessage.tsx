{"data":"aW1wb3J0IHsgdXNlRWZmZWN0LCB1c2VNZW1vLCB1c2VTdGF0ZSB9IGZyb20gInJlYWN0IjsKaW1wb3J0IHsgdXNlTXV0YXRpb24gfSBmcm9tICJjb252ZXgvcmVhY3QiOwppbXBvcnQgeyBhcGkgfSBmcm9tICIuLi8uLi8uLi9jb252ZXgvX2dlbmVyYXRlZC9hcGkiOwppbXBvcnQgeyBEaWFsb2csIERpYWxvZ0NvbnRlbnQsIERpYWxvZ0Rlc2NyaXB0aW9uLCBEaWFsb2dGb290ZXIsIERpYWxvZ0hlYWRlciwgRGlhbG9nVGl0bGUgfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvZGlhbG9nIjsKaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2J1dHRvbiI7CmltcG9ydCB7IElucHV0IH0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2lucHV0IjsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICJzb25uZXIiOwppbXBvcnQgdHlwZSB7IElkIH0gZnJvbSAiLi4vLi4vLi4vY29udmV4L19nZW5lcmF0ZWQvZGF0YU1vZGVsIjsKCmV4cG9ydCBmdW5jdGlvbiBTY2hlZHVsZU1lc3NhZ2UoewogIGlzT3BlbiwKICBvbkNsb3NlLAogIG1hdGNoSWQsCiAgdXNlcklkLAogIGluaXRpYWxCb2R5LAp9OiB7CiAgaXNPcGVuOiBib29sZWFuOwogIG9uQ2xvc2U6ICgpID0+IHZvaWQ7CiAgbWF0Y2hJZDogSWQ8Im1hdGNoZXMiPjsKICB1c2VySWQ6IElkPCJ1c2VycyI+OwogIGluaXRpYWxCb2R5OiBzdHJpbmc7Cn0pIHsKICBjb25zdCBzY2hlZHVsZSA9IHVzZU11dGF0aW9uKGFwaS5zY2hlZHVsZWRNZXNzYWdlcy5zY2hlZHVsZU1lc3NhZ2UpOwogIGNvbnN0IFtib2R5LCBzZXRCb2R5XSA9IHVzZVN0YXRlKGluaXRpYWxCb2R5KTsKICBjb25zdCBbd2hlbiwgc2V0V2hlbl0gPSB1c2VTdGF0ZTxzdHJpbmc+KCgpID0+IHsKICAgIGNvbnN0IGQgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgMTAgKiA2MCAqIDEwMDApOwogICAgcmV0dXJuIGQudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxNik7CiAgfSk7CiAgY29uc3QgW3NhdmluZywgc2V0U2F2aW5nXSA9IHVzZVN0YXRlKGZhbHNlKTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChpc09wZW4pIHNldEJvZHkoaW5pdGlhbEJvZHkpOwogIH0sIFtpc09wZW4sIGluaXRpYWxCb2R5XSk7CgogIGNvbnN0IHNjaGVkdWxlZEZvciA9IHVzZU1lbW8oKCkgPT4gewogICAgY29uc3QgZHQgPSBuZXcgRGF0ZSh3aGVuKTsKICAgIGNvbnN0IG1zID0gZHQuZ2V0VGltZSgpOwogICAgcmV0dXJuIE51bWJlci5pc0Zpbml0ZShtcykgPyBtcyA6IG51bGw7CiAgfSwgW3doZW5dKTsKCiAgY29uc3QgY2FuU2F2ZSA9IGJvZHkudHJpbSgpLmxlbmd0aCA+IDAgJiYgdHlwZW9mIHNjaGVkdWxlZEZvciA9PT0gIm51bWJlciIgJiYgc2NoZWR1bGVkRm9yID4gRGF0ZS5ub3coKTsKCiAgY29uc3Qgc3VibWl0ID0gYXN5bmMgKCkgPT4gewogICAgaWYgKCFjYW5TYXZlKSByZXR1cm47CiAgICBzZXRTYXZpbmcodHJ1ZSk7CiAgICB0cnkgewogICAgICBhd2FpdCBzY2hlZHVsZSh7IG1hdGNoSWQsIHNlbmRlcklkOiB1c2VySWQsIGJvZHk6IGJvZHkudHJpbSgpLCBzY2hlZHVsZWRGb3I6IHNjaGVkdWxlZEZvciEgfSBhcyBhbnkpOwogICAgICB0b2FzdC5zdWNjZXNzKCJNZXNzYWdlIHNjaGVkdWxlZCIpOwogICAgICBvbkNsb3NlKCk7CiAgICB9IGNhdGNoIChlOiBhbnkpIHsKICAgICAgdG9hc3QuZXJyb3IoZT8ubWVzc2FnZSB8fCAiRmFpbGVkIHRvIHNjaGVkdWxlIG1lc3NhZ2UiKTsKICAgIH0gZmluYWxseSB7CiAgICAgIHNldFNhdmluZyhmYWxzZSk7CiAgICB9CiAgfTsKCiAgcmV0dXJuICgKICAgIDxEaWFsb2cKICAgICAgb3Blbj17aXNPcGVufQogICAgICBvbk9wZW5DaGFuZ2U9eyhvcGVuKSA9PiB7CiAgICAgICAgaWYgKCFvcGVuKSBvbkNsb3NlKCk7CiAgICAgIH19CiAgICA+CiAgICAgIDxEaWFsb2dDb250ZW50IGNsYXNzTmFtZT0ic206bWF4LXctbGciPgogICAgICAgIDxEaWFsb2dIZWFkZXI+CiAgICAgICAgICA8RGlhbG9nVGl0bGU+U2NoZWR1bGUgbWVzc2FnZTwvRGlhbG9nVGl0bGU+CiAgICAgICAgICA8RGlhbG9nRGVzY3JpcHRpb24+CiAgICAgICAgICAgIENob29zZSB3aGVuIHRvIHNlbmQgeW91ciBtZXNzYWdlCiAgICAgICAgICA8L0RpYWxvZ0Rlc2NyaXB0aW9uPgogICAgICAgIDwvRGlhbG9nSGVhZGVyPgoKICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS0zIj4KICAgICAgICAgIDxJbnB1dCB2YWx1ZT17Ym9keX0gb25DaGFuZ2U9eyhlKSA9PiBzZXRCb2R5KGUudGFyZ2V0LnZhbHVlKX0gcGxhY2Vob2xkZXI9Ik1lc3NhZ2UiIC8+CiAgICAgICAgICA8SW5wdXQgdHlwZT0iZGF0ZXRpbWUtbG9jYWwiIHZhbHVlPXt3aGVufSBvbkNoYW5nZT17KGUpID0+IHNldFdoZW4oZS50YXJnZXQudmFsdWUpfSAvPgogICAgICAgIDwvZGl2PgoKICAgICAgICA8RGlhbG9nRm9vdGVyPgogICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJnaG9zdCIgb25DbGljaz17b25DbG9zZX0gZGlzYWJsZWQ9e3NhdmluZ30+CiAgICAgICAgICAgIENhbmNlbAogICAgICAgICAgPC9CdXR0b24+CiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3N1Ym1pdH0gZGlzYWJsZWQ9eyFjYW5TYXZlIHx8IHNhdmluZ30+CiAgICAgICAgICAgIFNjaGVkdWxlCiAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICA8L0RpYWxvZ0Zvb3Rlcj4KICAgICAgPC9EaWFsb2dDb250ZW50PgogICAgPC9EaWFsb2c+CiAgKTsKfQo="}