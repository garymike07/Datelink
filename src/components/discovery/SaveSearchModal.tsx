{"data":"aW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICJyZWFjdCI7CmltcG9ydCB7IHVzZU11dGF0aW9uLCB1c2VRdWVyeSB9IGZyb20gImNvbnZleC9yZWFjdCI7CmltcG9ydCB7IGFwaSB9IGZyb20gIi4uLy4uLy4uL2NvbnZleC9fZ2VuZXJhdGVkL2FwaSI7CmltcG9ydCB7CiAgRGlhbG9nLAogIERpYWxvZ0NvbnRlbnQsCiAgRGlhbG9nRGVzY3JpcHRpb24sCiAgRGlhbG9nSGVhZGVyLAogIERpYWxvZ1RpdGxlLAogIERpYWxvZ0Zvb3RlciwKfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvZGlhbG9nIjsKaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2J1dHRvbiI7CmltcG9ydCB7IElucHV0IH0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2lucHV0IjsKaW1wb3J0IHsgTGFiZWwgfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvbGFiZWwiOwppbXBvcnQgeyBTd2l0Y2ggfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvc3dpdGNoIjsKaW1wb3J0IHsgdXNlVG9hc3QgfSBmcm9tICJAL2hvb2tzL3VzZS10b2FzdCI7CgppbnRlcmZhY2UgU2F2ZVNlYXJjaE1vZGFsUHJvcHMgewogIGlzT3BlbjogYm9vbGVhbjsKICBvbkNsb3NlOiAoKSA9PiB2b2lkOwogIHVzZXJJZDogc3RyaW5nOwogIGN1cnJlbnRGaWx0ZXJzPzogYW55OwogIGV4aXN0aW5nU2VhcmNoPzogYW55Owp9Cgpjb25zdCBTYXZlU2VhcmNoTW9kYWw6IFJlYWN0LkZDPFNhdmVTZWFyY2hNb2RhbFByb3BzPiA9ICh7CiAgaXNPcGVuLAogIG9uQ2xvc2UsCiAgdXNlcklkLAogIGN1cnJlbnRGaWx0ZXJzLAogIGV4aXN0aW5nU2VhcmNoLAp9KSA9PiB7CiAgY29uc3QgeyB0b2FzdCB9ID0gdXNlVG9hc3QoKTsKICBjb25zdCBbc2VhcmNoTmFtZSwgc2V0U2VhcmNoTmFtZV0gPSB1c2VTdGF0ZSgiIik7CiAgY29uc3QgW25vdGlmaWNhdGlvbnNFbmFibGVkLCBzZXROb3RpZmljYXRpb25zRW5hYmxlZF0gPSB1c2VTdGF0ZShmYWxzZSk7CgogIGNvbnN0IHNhdmVTZWFyY2ggPSB1c2VNdXRhdGlvbihhcGkuZGlzY292ZXJ5LnNhdmVTZWFyY2gpOwogIGNvbnN0IHVwZGF0ZVNlYXJjaCA9IHVzZU11dGF0aW9uKGFwaS5kaXNjb3ZlcnkudXBkYXRlU2F2ZWRTZWFyY2gpOwoKICAvLyBHZXQgdXNlciBwcmVmZXJlbmNlcyBmb3IgZGVmYXVsdCBmaWx0ZXJzCiAgY29uc3QgcHJlZmVyZW5jZXMgPSB1c2VRdWVyeShhcGkubWF0Y2hpbmcuZ2V0VXNlclByZWZlcmVuY2VzLCB7IHVzZXJJZCB9KTsKCiAgdXNlRWZmZWN0KCgpID0+IHsKICAgIGlmIChleGlzdGluZ1NlYXJjaCkgewogICAgICBzZXRTZWFyY2hOYW1lKGV4aXN0aW5nU2VhcmNoLm5hbWUpOwogICAgICBzZXROb3RpZmljYXRpb25zRW5hYmxlZChleGlzdGluZ1NlYXJjaC5ub3RpZmljYXRpb25zRW5hYmxlZCk7CiAgICB9IGVsc2UgewogICAgICBzZXRTZWFyY2hOYW1lKCIiKTsKICAgICAgc2V0Tm90aWZpY2F0aW9uc0VuYWJsZWQoZmFsc2UpOwogICAgfQogIH0sIFtleGlzdGluZ1NlYXJjaF0pOwoKICBjb25zdCBoYW5kbGVTYXZlID0gYXN5bmMgKCkgPT4gewogICAgaWYgKCFzZWFyY2hOYW1lLnRyaW0oKSkgewogICAgICB0b2FzdCh7CiAgICAgICAgdGl0bGU6ICJOYW1lIHJlcXVpcmVkIiwKICAgICAgICBkZXNjcmlwdGlvbjogIlBsZWFzZSBlbnRlciBhIG5hbWUgZm9yIHRoaXMgc2VhcmNoLiIsCiAgICAgICAgdmFyaWFudDogImRlc3RydWN0aXZlIiwKICAgICAgfSk7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICB0cnkgewogICAgICBjb25zdCBmaWx0ZXJzID0gY3VycmVudEZpbHRlcnMgfHwgKHByZWZlcmVuY2VzID8gewogICAgICAgIG1pbkFnZTogcHJlZmVyZW5jZXMubWluQWdlLAogICAgICAgIG1heEFnZTogcHJlZmVyZW5jZXMubWF4QWdlLAogICAgICAgIG1heERpc3RhbmNlOiBwcmVmZXJlbmNlcy5tYXhEaXN0YW5jZSwKICAgICAgICBnZW5kZXJQcmVmZXJlbmNlOiBwcmVmZXJlbmNlcy5nZW5kZXJQcmVmZXJlbmNlLAogICAgICAgIG1pbkhlaWdodDogcHJlZmVyZW5jZXMubWluSGVpZ2h0LAogICAgICAgIG1heEhlaWdodDogcHJlZmVyZW5jZXMubWF4SGVpZ2h0LAogICAgICAgIHJlbGF0aW9uc2hpcEdvYWxzOiBwcmVmZXJlbmNlcy5yZWxhdGlvbnNoaXBHb2FscywKICAgICAgICByZWxpZ2lvbnM6IHByZWZlcmVuY2VzLnJlbGlnaW9ucywKICAgICAgICBlZHVjYXRpb246IHByZWZlcmVuY2VzLmVkdWNhdGlvbiwKICAgICAgICB2ZXJpZmllZDogcHJlZmVyZW5jZXMubXVzdEJlVmVyaWZpZWQsCiAgICAgIH0gOiB7CiAgICAgICAgbWluQWdlOiAxOCwKICAgICAgICBtYXhBZ2U6IDUwLAogICAgICAgIG1heERpc3RhbmNlOiA1MCwKICAgICAgICBnZW5kZXJQcmVmZXJlbmNlOiBbIndvbWFuIl0sCiAgICAgIH0pOwoKICAgICAgaWYgKGV4aXN0aW5nU2VhcmNoKSB7CiAgICAgICAgYXdhaXQgdXBkYXRlU2VhcmNoKHsKICAgICAgICAgIHVzZXJJZCwKICAgICAgICAgIHNlYXJjaElkOiBleGlzdGluZ1NlYXJjaC5faWQsCiAgICAgICAgICBuYW1lOiBzZWFyY2hOYW1lLAogICAgICAgICAgbm90aWZpY2F0aW9uc0VuYWJsZWQsCiAgICAgICAgfSk7CiAgICAgICAgdG9hc3QoewogICAgICAgICAgdGl0bGU6ICJTZWFyY2ggdXBkYXRlZCIsCiAgICAgICAgICBkZXNjcmlwdGlvbjogIllvdXIgc2VhcmNoIGhhcyBiZWVuIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5LiIsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXdhaXQgc2F2ZVNlYXJjaCh7CiAgICAgICAgICB1c2VySWQsCiAgICAgICAgICBuYW1lOiBzZWFyY2hOYW1lLAogICAgICAgICAgZmlsdGVycywKICAgICAgICAgIG5vdGlmaWNhdGlvbnNFbmFibGVkLAogICAgICAgIH0pOwogICAgICAgIHRvYXN0KHsKICAgICAgICAgIHRpdGxlOiAiU2VhcmNoIHNhdmVkIiwKICAgICAgICAgIGRlc2NyaXB0aW9uOiAiWW91ciBzZWFyY2ggaGFzIGJlZW4gc2F2ZWQgc3VjY2Vzc2Z1bGx5LiIsCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgCiAgICAgIG9uQ2xvc2UoKTsKICAgICAgc2V0U2VhcmNoTmFtZSgiIik7CiAgICAgIHNldE5vdGlmaWNhdGlvbnNFbmFibGVkKGZhbHNlKTsKICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHsKICAgICAgdG9hc3QoewogICAgICAgIHRpdGxlOiAiRXJyb3IiLAogICAgICAgIGRlc2NyaXB0aW9uOiBlcnJvci5tZXNzYWdlLAogICAgICAgIHZhcmlhbnQ6ICJkZXN0cnVjdGl2ZSIsCiAgICAgIH0pOwogICAgfQogIH07CgogIHJldHVybiAoCiAgICA8RGlhbG9nIG9wZW49e2lzT3Blbn0gb25PcGVuQ2hhbmdlPXtvbkNsb3NlfT4KICAgICAgPERpYWxvZ0NvbnRlbnQ+CiAgICAgICAgPERpYWxvZ0hlYWRlcj4KICAgICAgICAgIDxEaWFsb2dUaXRsZT4KICAgICAgICAgICAge2V4aXN0aW5nU2VhcmNoID8gIkVkaXQgU2F2ZWQgU2VhcmNoIiA6ICJTYXZlIFNlYXJjaCJ9CiAgICAgICAgICA8L0RpYWxvZ1RpdGxlPgogICAgICAgICAgPERpYWxvZ0Rlc2NyaXB0aW9uPgogICAgICAgICAgICB7ZXhpc3RpbmdTZWFyY2gKICAgICAgICAgICAgICA/ICJVcGRhdGUgeW91ciBzYXZlZCBzZWFyY2ggZGV0YWlscyIKICAgICAgICAgICAgICA6ICJTYXZlIHlvdXIgY3VycmVudCBmaWx0ZXJzIGZvciBxdWljayBhY2Nlc3MgbGF0ZXIifQogICAgICAgICAgPC9EaWFsb2dEZXNjcmlwdGlvbj4KICAgICAgICA8L0RpYWxvZ0hlYWRlcj4KCiAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktNCBweS00Ij4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTIiPgogICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0ic2VhcmNoTmFtZSI+U2VhcmNoIE5hbWU8L0xhYmVsPgogICAgICAgICAgICA8SW5wdXQKICAgICAgICAgICAgICBpZD0ic2VhcmNoTmFtZSIKICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iZS5nLiwgQWN0aXZlIHByb2Zlc3Npb25hbHMgbmVhcmJ5IgogICAgICAgICAgICAgIHZhbHVlPXtzZWFyY2hOYW1lfQogICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0U2VhcmNoTmFtZShlLnRhcmdldC52YWx1ZSl9CiAgICAgICAgICAgIC8+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1iZXR3ZWVuIj4KICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMC41Ij4KICAgICAgICAgICAgICA8TGFiZWwgaHRtbEZvcj0ibm90aWZpY2F0aW9ucyI+RW5hYmxlIE5vdGlmaWNhdGlvbnM8L0xhYmVsPgogICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQiPgogICAgICAgICAgICAgICAgR2V0IG5vdGlmaWVkIHdoZW4gbmV3IHByb2ZpbGVzIG1hdGNoIHRoaXMgc2VhcmNoCiAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPFN3aXRjaAogICAgICAgICAgICAgIGlkPSJub3RpZmljYXRpb25zIgogICAgICAgICAgICAgIGNoZWNrZWQ9e25vdGlmaWNhdGlvbnNFbmFibGVkfQogICAgICAgICAgICAgIG9uQ2hlY2tlZENoYW5nZT17c2V0Tm90aWZpY2F0aW9uc0VuYWJsZWR9CiAgICAgICAgICAgIC8+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPERpYWxvZ0Zvb3Rlcj4KICAgICAgICAgIDxCdXR0b24gdmFyaWFudD0ib3V0bGluZSIgb25DbGljaz17b25DbG9zZX0+CiAgICAgICAgICAgIENhbmNlbAogICAgICAgICAgPC9CdXR0b24+CiAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e2hhbmRsZVNhdmV9PgogICAgICAgICAgICB7ZXhpc3RpbmdTZWFyY2ggPyAiVXBkYXRlIiA6ICJTYXZlIn0gU2VhcmNoCiAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICA8L0RpYWxvZ0Zvb3Rlcj4KICAgICAgPC9EaWFsb2dDb250ZW50PgogICAgPC9EaWFsb2c+CiAgKTsKfTsKCmV4cG9ydCBkZWZhdWx0IFNhdmVTZWFyY2hNb2RhbDsK"}