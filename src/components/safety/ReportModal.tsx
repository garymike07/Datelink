{"data":"aW1wb3J0IHsgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tICJyZWFjdCI7CmltcG9ydCB7IHVzZU11dGF0aW9uIH0gZnJvbSAiY29udmV4L3JlYWN0IjsKaW1wb3J0IHsgYXBpIH0gZnJvbSAiLi4vLi4vLi4vY29udmV4L19nZW5lcmF0ZWQvYXBpIjsKaW1wb3J0IHsgdG9hc3QgfSBmcm9tICJzb25uZXIiOwoKaW1wb3J0IHsKICBEaWFsb2csCiAgRGlhbG9nQ29udGVudCwKICBEaWFsb2dEZXNjcmlwdGlvbiwKICBEaWFsb2dGb290ZXIsCiAgRGlhbG9nSGVhZGVyLAogIERpYWxvZ1RpdGxlLAp9IGZyb20gIkAvY29tcG9uZW50cy91aS9kaWFsb2ciOwppbXBvcnQgeyBCdXR0b24gfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvYnV0dG9uIjsKaW1wb3J0IHsgTGFiZWwgfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvbGFiZWwiOwppbXBvcnQgeyBUZXh0YXJlYSB9IGZyb20gIkAvY29tcG9uZW50cy91aS90ZXh0YXJlYSI7CmltcG9ydCB7IENoZWNrYm94IH0gZnJvbSAiQC9jb21wb25lbnRzL3VpL2NoZWNrYm94IjsKaW1wb3J0IHsKICBTZWxlY3QsCiAgU2VsZWN0Q29udGVudCwKICBTZWxlY3RJdGVtLAogIFNlbGVjdFRyaWdnZXIsCiAgU2VsZWN0VmFsdWUsCn0gZnJvbSAiQC9jb21wb25lbnRzL3VpL3NlbGVjdCI7Cgp0eXBlIFJlcG9ydENhdGVnb3J5ID0KICB8ICJpbmFwcHJvcHJpYXRlX21lc3NhZ2VzIgogIHwgInByb2ZpbGVfaXNzdWVzIgogIHwgIm9mZmxpbmVfYmVoYXZpb3IiCiAgfCAib3RoZXIiOwoKY29uc3Qgc3ViY2F0ZWdvcmllc0J5Q2F0ZWdvcnk6IFJlY29yZDxSZXBvcnRDYXRlZ29yeSwgeyB2YWx1ZTogc3RyaW5nOyBsYWJlbDogc3RyaW5nIH1bXT4gPSB7CiAgaW5hcHByb3ByaWF0ZV9tZXNzYWdlczogWwogICAgeyB2YWx1ZTogInNleHVhbF9jb250ZW50IiwgbGFiZWw6ICJTZXh1YWwgY29udGVudCIgfSwKICAgIHsgdmFsdWU6ICJoYXJhc3NtZW50IiwgbGFiZWw6ICJIYXJhc3NtZW50IiB9LAogICAgeyB2YWx1ZTogImhhdGVfc3BlZWNoIiwgbGFiZWw6ICJIYXRlIHNwZWVjaCIgfSwKICAgIHsgdmFsdWU6ICJzcGFtIiwgbGFiZWw6ICJTcGFtIiB9LAogIF0sCiAgcHJvZmlsZV9pc3N1ZXM6IFsKICAgIHsgdmFsdWU6ICJmYWtlX3Byb2ZpbGUiLCBsYWJlbDogIkZha2UgcHJvZmlsZSIgfSwKICAgIHsgdmFsdWU6ICJzdG9sZW5fcGhvdG9zIiwgbGFiZWw6ICJTdG9sZW4gcGhvdG9zIiB9LAogICAgeyB2YWx1ZTogInVuZGVyYWdlX3VzZXIiLCBsYWJlbDogIlVuZGVyYWdlIHVzZXIiIH0sCiAgICB7IHZhbHVlOiAic2NhbV9mcmF1ZCIsIGxhYmVsOiAiU2NhbSAvIGZyYXVkIiB9LAogIF0sCiAgb2ZmbGluZV9iZWhhdmlvcjogWwogICAgeyB2YWx1ZTogImZlbHRfdW5zYWZlIiwgbGFiZWw6ICJGZWx0IHVuc2FmZSBpbiBwZXJzb24iIH0sCiAgICB7IHZhbHVlOiAiZGlkbnRfbWF0Y2hfcGhvdG9zIiwgbGFiZWw6ICJEaWRu4oCZdCBtYXRjaCBwaG90b3MiIH0sCiAgICB7IHZhbHVlOiAidGhyZWF0ZW5pbmdfYmVoYXZpb3IiLCBsYWJlbDogIlRocmVhdGVuaW5nIGJlaGF2aW9yIiB9LAogICAgeyB2YWx1ZTogInN0b29kX21lX3VwIiwgbGFiZWw6ICJTdG9vZCBtZSB1cCIgfSwKICBdLAogIG90aGVyOiBbeyB2YWx1ZTogIm90aGVyIiwgbGFiZWw6ICJPdGhlciIgfV0sCn07CgpleHBvcnQgZnVuY3Rpb24gUmVwb3J0TW9kYWwocHJvcHM6IHsKICBpc09wZW46IGJvb2xlYW47CiAgb25DbG9zZTogKCkgPT4gdm9pZDsKICByZXBvcnRlcklkOiBzdHJpbmc7CiAgcmVwb3J0ZWRVc2VySWQ6IHN0cmluZzsKfSkgewogIGNvbnN0IHN1Ym1pdFJlcG9ydCA9IHVzZU11dGF0aW9uKGFwaS5zYWZldHkuc3VibWl0UmVwb3J0KTsKICBjb25zdCBibG9ja1VzZXIgPSB1c2VNdXRhdGlvbihhcGkuc2FmZXR5LmJsb2NrVXNlcik7CgogIGNvbnN0IFtjYXRlZ29yeSwgc2V0Q2F0ZWdvcnldID0gdXNlU3RhdGU8UmVwb3J0Q2F0ZWdvcnk+KCJpbmFwcHJvcHJpYXRlX21lc3NhZ2VzIik7CiAgY29uc3QgW3N1YmNhdGVnb3J5LCBzZXRTdWJjYXRlZ29yeV0gPSB1c2VTdGF0ZTxzdHJpbmc+KCJzZXh1YWxfY29udGVudCIpOwogIGNvbnN0IFtkZXNjcmlwdGlvbiwgc2V0RGVzY3JpcHRpb25dID0gdXNlU3RhdGUoIiIpOwogIGNvbnN0IFtzY3JlZW5zaG90cywgc2V0U2NyZWVuc2hvdHNdID0gdXNlU3RhdGU8c3RyaW5nW10+KFtdKTsKICBjb25zdCBbYXV0b0Jsb2NrLCBzZXRBdXRvQmxvY2tdID0gdXNlU3RhdGUodHJ1ZSk7CiAgY29uc3QgW3N1Ym1pdHRpbmcsIHNldFN1Ym1pdHRpbmddID0gdXNlU3RhdGUoZmFsc2UpOwoKICBjb25zdCBzdWJjYXRlZ29yaWVzID0gdXNlTWVtbygoKSA9PiBzdWJjYXRlZ29yaWVzQnlDYXRlZ29yeVtjYXRlZ29yeV0sIFtjYXRlZ29yeV0pOwoKICBjb25zdCByZXNldCA9ICgpID0+IHsKICAgIHNldENhdGVnb3J5KCJpbmFwcHJvcHJpYXRlX21lc3NhZ2VzIik7CiAgICBzZXRTdWJjYXRlZ29yeSgic2V4dWFsX2NvbnRlbnQiKTsKICAgIHNldERlc2NyaXB0aW9uKCIiKTsKICAgIHNldFNjcmVlbnNob3RzKFtdKTsKICAgIHNldEF1dG9CbG9jayh0cnVlKTsKICAgIHNldFN1Ym1pdHRpbmcoZmFsc2UpOwogIH07CgogIGNvbnN0IGhhbmRsZUNsb3NlID0gKCkgPT4gewogICAgcmVzZXQoKTsKICAgIHByb3BzLm9uQ2xvc2UoKTsKICB9OwoKICBjb25zdCBoYW5kbGVTY3JlZW5zaG90c1VwbG9hZCA9IChlOiBSZWFjdC5DaGFuZ2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4gewogICAgY29uc3QgZmlsZXMgPSBlLnRhcmdldC5maWxlczsKICAgIGlmICghZmlsZXMpIHJldHVybjsKICAgIGNvbnN0IHNlbGVjdGVkID0gQXJyYXkuZnJvbShmaWxlcykuc2xpY2UoMCwgMyk7CgogICAgUHJvbWlzZS5hbGwoCiAgICAgIHNlbGVjdGVkLm1hcCgKICAgICAgICAoZmlsZSkgPT4KICAgICAgICAgIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICByZWFkZXIub25lcnJvciA9ICgpID0+IHJlamVjdChuZXcgRXJyb3IoIkZhaWxlZCB0byByZWFkIGZpbGUiKSk7CiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKFN0cmluZyhyZWFkZXIucmVzdWx0IHx8ICIiKSk7CiAgICAgICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgICAgICAgfSkKICAgICAgKQogICAgKQogICAgICAudGhlbigoZGF0YVVybHMpID0+IHNldFNjcmVlbnNob3RzKChwcmV2KSA9PiBbLi4ucHJldiwgLi4uZGF0YVVybHNdLnNsaWNlKDAsIDMpKSkKICAgICAgLmNhdGNoKCgpID0+IHRvYXN0LmVycm9yKCJGYWlsZWQgdG8gYXR0YWNoIHNjcmVlbnNob3RzIikpOwogIH07CgogIGNvbnN0IGhhbmRsZVN1Ym1pdCA9IGFzeW5jICgpID0+IHsKICAgIHNldFN1Ym1pdHRpbmcodHJ1ZSk7CiAgICB0cnkgewogICAgICBhd2FpdCBzdWJtaXRSZXBvcnQoewogICAgICAgIHJlcG9ydGVySWQ6IHByb3BzLnJlcG9ydGVySWQgYXMgYW55LAogICAgICAgIHJlcG9ydGVkVXNlcklkOiBwcm9wcy5yZXBvcnRlZFVzZXJJZCBhcyBhbnksCiAgICAgICAgY2F0ZWdvcnksCiAgICAgICAgc3ViY2F0ZWdvcnksCiAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLnRyaW0oKSA/IGRlc2NyaXB0aW9uLnRyaW0oKSA6IHVuZGVmaW5lZCwKICAgICAgICBzY3JlZW5zaG90czogc2NyZWVuc2hvdHMubGVuZ3RoID8gc2NyZWVuc2hvdHMgOiB1bmRlZmluZWQsCiAgICAgICAgYXV0b0Jsb2NrLAogICAgICB9IGFzIGFueSk7CgogICAgICBpZiAoYXV0b0Jsb2NrKSB7CiAgICAgICAgYXdhaXQgYmxvY2tVc2VyKHsKICAgICAgICAgIGJsb2NrZXJJZDogcHJvcHMucmVwb3J0ZXJJZCBhcyBhbnksCiAgICAgICAgICBibG9ja2VkVXNlcklkOiBwcm9wcy5yZXBvcnRlZFVzZXJJZCBhcyBhbnksCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRvYXN0LnN1Y2Nlc3MoIlRoYW5rcyBmb3Iga2VlcGluZyBvdXIgY29tbXVuaXR5IHNhZmUiKTsKICAgICAgaGFuZGxlQ2xvc2UoKTsKICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHsKICAgICAgdG9hc3QuZXJyb3IoZXJyb3I/Lm1lc3NhZ2UgfHwgIkZhaWxlZCB0byBzdWJtaXQgcmVwb3J0Iik7CiAgICB9IGZpbmFsbHkgewogICAgICBzZXRTdWJtaXR0aW5nKGZhbHNlKTsKICAgIH0KICB9OwoKICByZXR1cm4gKAogICAgPERpYWxvZyBvcGVuPXtwcm9wcy5pc09wZW59IG9uT3BlbkNoYW5nZT17KG9wZW4pID0+ICFvcGVuICYmIGhhbmRsZUNsb3NlKCl9PgogICAgICA8RGlhbG9nQ29udGVudCBjbGFzc05hbWU9InNtOm1heC13LWxnIj4KICAgICAgICA8RGlhbG9nSGVhZGVyPgogICAgICAgICAgPERpYWxvZ1RpdGxlPlJlcG9ydCB1c2VyPC9EaWFsb2dUaXRsZT4KICAgICAgICAgIDxEaWFsb2dEZXNjcmlwdGlvbj4KICAgICAgICAgICAgVGVsbCB1cyB3aGF0IGhhcHBlbmVkLiBSZXBvcnRzIGFyZSBjb25maWRlbnRpYWwuCiAgICAgICAgICA8L0RpYWxvZ0Rlc2NyaXB0aW9uPgogICAgICAgIDwvRGlhbG9nSGVhZGVyPgoKICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS00Ij4KICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTIiPgogICAgICAgICAgICA8TGFiZWw+Q2F0ZWdvcnk8L0xhYmVsPgogICAgICAgICAgICA8U2VsZWN0CiAgICAgICAgICAgICAgdmFsdWU9e2NhdGVnb3J5fQogICAgICAgICAgICAgIG9uVmFsdWVDaGFuZ2U9eyh2KSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXh0ID0gdiBhcyBSZXBvcnRDYXRlZ29yeTsKICAgICAgICAgICAgICAgIHNldENhdGVnb3J5KG5leHQpOwogICAgICAgICAgICAgICAgc2V0U3ViY2F0ZWdvcnkoc3ViY2F0ZWdvcmllc0J5Q2F0ZWdvcnlbbmV4dF1bMF0/LnZhbHVlIHx8ICJvdGhlciIpOwogICAgICAgICAgICAgIH19CiAgICAgICAgICAgID4KICAgICAgICAgICAgICA8U2VsZWN0VHJpZ2dlcj4KICAgICAgICAgICAgICAgIDxTZWxlY3RWYWx1ZSBwbGFjZWhvbGRlcj0iU2VsZWN0IGNhdGVnb3J5IiAvPgogICAgICAgICAgICAgIDwvU2VsZWN0VHJpZ2dlcj4KICAgICAgICAgICAgICA8U2VsZWN0Q29udGVudD4KICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIHZhbHVlPSJpbmFwcHJvcHJpYXRlX21lc3NhZ2VzIj5JbmFwcHJvcHJpYXRlIE1lc3NhZ2VzPC9TZWxlY3RJdGVtPgogICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9InByb2ZpbGVfaXNzdWVzIj5Qcm9maWxlIElzc3VlczwvU2VsZWN0SXRlbT4KICAgICAgICAgICAgICAgIDxTZWxlY3RJdGVtIHZhbHVlPSJvZmZsaW5lX2JlaGF2aW9yIj5PZmZsaW5lIEJlaGF2aW9yPC9TZWxlY3RJdGVtPgogICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0gdmFsdWU9Im90aGVyIj5PdGhlcjwvU2VsZWN0SXRlbT4KICAgICAgICAgICAgICA8L1NlbGVjdENvbnRlbnQ+CiAgICAgICAgICAgIDwvU2VsZWN0PgogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMiI+CiAgICAgICAgICAgIDxMYWJlbD5TdWJjYXRlZ29yeTwvTGFiZWw+CiAgICAgICAgICAgIDxTZWxlY3QgdmFsdWU9e3N1YmNhdGVnb3J5fSBvblZhbHVlQ2hhbmdlPXtzZXRTdWJjYXRlZ29yeX0+CiAgICAgICAgICAgICAgPFNlbGVjdFRyaWdnZXI+CiAgICAgICAgICAgICAgICA8U2VsZWN0VmFsdWUgcGxhY2Vob2xkZXI9IlNlbGVjdCBzdWJjYXRlZ29yeSIgLz4KICAgICAgICAgICAgICA8L1NlbGVjdFRyaWdnZXI+CiAgICAgICAgICAgICAgPFNlbGVjdENvbnRlbnQ+CiAgICAgICAgICAgICAgICB7c3ViY2F0ZWdvcmllcy5tYXAoKHMpID0+ICgKICAgICAgICAgICAgICAgICAgPFNlbGVjdEl0ZW0ga2V5PXtzLnZhbHVlfSB2YWx1ZT17cy52YWx1ZX0+CiAgICAgICAgICAgICAgICAgICAge3MubGFiZWx9CiAgICAgICAgICAgICAgICAgIDwvU2VsZWN0SXRlbT4KICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgIDwvU2VsZWN0Q29udGVudD4KICAgICAgICAgICAgPC9TZWxlY3Q+CiAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ic3BhY2UteS0yIj4KICAgICAgICAgICAgPExhYmVsPkRldGFpbHMgKG9wdGlvbmFsKTwvTGFiZWw+CiAgICAgICAgICAgIDxUZXh0YXJlYQogICAgICAgICAgICAgIHZhbHVlPXtkZXNjcmlwdGlvbn0KICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldERlc2NyaXB0aW9uKGUudGFyZ2V0LnZhbHVlKX0KICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iQWRkIGNvbnRleHQgdG8gaGVscCBvdXIgdGVhbSByZXZpZXfigKYiCiAgICAgICAgICAgICAgcm93cz17NH0KICAgICAgICAgICAgLz4KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTIiPgogICAgICAgICAgICA8TGFiZWw+QXR0YWNoIHNjcmVlbnNob3RzIChvcHRpb25hbCk8L0xhYmVsPgogICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICB0eXBlPSJmaWxlIgogICAgICAgICAgICAgIGFjY2VwdD0iaW1hZ2UvKiIKICAgICAgICAgICAgICBtdWx0aXBsZQogICAgICAgICAgICAgIG9uQ2hhbmdlPXtoYW5kbGVTY3JlZW5zaG90c1VwbG9hZH0KICAgICAgICAgICAgLz4KICAgICAgICAgICAge3NjcmVlbnNob3RzLmxlbmd0aCA+IDAgJiYgKAogICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0zIGdhcC0yIj4KICAgICAgICAgICAgICAgIHtzY3JlZW5zaG90cy5tYXAoKHMsIGlkeCkgPT4gKAogICAgICAgICAgICAgICAgICA8ZGl2IGtleT17aWR4fSBjbGFzc05hbWU9ImFzcGVjdC1zcXVhcmUgb3ZlcmZsb3ctaGlkZGVuIHJvdW5kZWQtbWQgYm9yZGVyIj4KICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz17c30gYWx0PXtgU2NyZWVuc2hvdCAke2lkeCArIDF9YH0gY2xhc3NOYW1lPSJoLWZ1bGwgdy1mdWxsIG9iamVjdC1jb3ZlciIgLz4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKX0KICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJmbGV4IGl0ZW1zLWNlbnRlciBnYXAtMiI+CiAgICAgICAgICAgIDxDaGVja2JveAogICAgICAgICAgICAgIGlkPSJhdXRvLWJsb2NrIgogICAgICAgICAgICAgIGNoZWNrZWQ9e2F1dG9CbG9ja30KICAgICAgICAgICAgICBvbkNoZWNrZWRDaGFuZ2U9eyh2KSA9PiBzZXRBdXRvQmxvY2soQm9vbGVhbih2KSl9CiAgICAgICAgICAgIC8+CiAgICAgICAgICAgIDxMYWJlbCBodG1sRm9yPSJhdXRvLWJsb2NrIj5CbG9jayB1c2VyIGFmdGVyIHN1Ym1pdHRpbmcgKHJlY29tbWVuZGVkKTwvTGFiZWw+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPERpYWxvZ0Zvb3Rlcj4KICAgICAgICAgIDxCdXR0b24gdmFyaWFudD0ib3V0bGluZSIgb25DbGljaz17aGFuZGxlQ2xvc2V9IGRpc2FibGVkPXtzdWJtaXR0aW5nfT4KICAgICAgICAgICAgQ2FuY2VsCiAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICAgIDxCdXR0b24gb25DbGljaz17aGFuZGxlU3VibWl0fSBkaXNhYmxlZD17c3VibWl0dGluZ30+CiAgICAgICAgICAgIHtzdWJtaXR0aW5nID8gIlN1Ym1pdHRpbmfigKYiIDogIlN1Ym1pdCByZXBvcnQifQogICAgICAgICAgPC9CdXR0b24+CiAgICAgICAgPC9EaWFsb2dGb290ZXI+CiAgICAgIDwvRGlhbG9nQ29udGVudD4KICAgIDwvRGlhbG9nPgogICk7Cn0K"}