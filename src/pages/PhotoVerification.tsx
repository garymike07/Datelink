{"data":"aW1wb3J0IHsgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tICJyZWFjdCI7CmltcG9ydCB7IHVzZUF1dGggfSBmcm9tICJAL2NvbnRleHRzL0F1dGhDb250ZXh0IjsKaW1wb3J0IHsgdXNlTmF2aWdhdGUgfSBmcm9tICJyZWFjdC1yb3V0ZXItZG9tIjsKaW1wb3J0IHsgdXNlTXV0YXRpb24gfSBmcm9tICJjb252ZXgvcmVhY3QiOwppbXBvcnQgeyBhcGkgfSBmcm9tICIuLi8uLi9jb252ZXgvX2dlbmVyYXRlZC9hcGkiOwppbXBvcnQgeyB0b2FzdCB9IGZyb20gInNvbm5lciI7CgppbXBvcnQgeyBDYXJkLCBDYXJkQ29udGVudCwgQ2FyZERlc2NyaXB0aW9uLCBDYXJkSGVhZGVyLCBDYXJkVGl0bGUgfSBmcm9tICJAL2NvbXBvbmVudHMvdWkvY2FyZCI7CmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gIkAvY29tcG9uZW50cy91aS9idXR0b24iOwppbXBvcnQgeyBQcm9ncmVzcyB9IGZyb20gIkAvY29tcG9uZW50cy91aS9wcm9ncmVzcyI7Cgpjb25zdCBwb3NlcyA9IFsiTG9vayBsZWZ0IiwgIkxvb2sgcmlnaHQiLCAiU21pbGUiLCAiVGh1bWJzIHVwIl07CgpmdW5jdGlvbiByZWFkQXNEYXRhVXJsKGZpbGU6IEZpbGUpIHsKICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiByZWplY3QobmV3IEVycm9yKCJGYWlsZWQgdG8gcmVhZCBmaWxlIikpOwogICAgcmVhZGVyLm9ubG9hZCA9ICgpID0+IHJlc29sdmUoU3RyaW5nKHJlYWRlci5yZXN1bHQgfHwgIiIpKTsKICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogIH0pOwp9CgpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBQaG90b1ZlcmlmaWNhdGlvbigpIHsKICBjb25zdCBuYXZpZ2F0ZSA9IHVzZU5hdmlnYXRlKCk7CiAgY29uc3QgeyB1c2VyIH0gPSB1c2VBdXRoKCk7CiAgY29uc3QgdXNlcklkID0gdXNlcj8uX2lkIGFzIHN0cmluZyB8IHVuZGVmaW5lZDsKCiAgY29uc3Qgc3VibWl0VmVyaWZpY2F0aW9uID0gdXNlTXV0YXRpb24oYXBpLnZlcmlmaWNhdGlvbi5zdWJtaXRWZXJpZmljYXRpb24pOwoKICBjb25zdCBbc3RlcCwgc2V0U3RlcF0gPSB1c2VTdGF0ZTwxIHwgMiB8IDM+KDEpOwogIGNvbnN0IFtwb3NlQV0gPSB1c2VTdGF0ZSgoKSA9PiBwb3Nlc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBwb3Nlcy5sZW5ndGgpXSk7CiAgY29uc3QgW3Bvc2VCXSA9IHVzZVN0YXRlKCgpID0+IHBvc2VzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc2VzLmxlbmd0aCldKTsKICBjb25zdCBbdXBsb2Fkcywgc2V0VXBsb2Fkc10gPSB1c2VTdGF0ZTx7IHBvc2U6IHN0cmluZzsgdXJsOiBzdHJpbmcgfVtdPihbXSk7CiAgY29uc3QgW3N1Ym1pdHRpbmcsIHNldFN1Ym1pdHRpbmddID0gdXNlU3RhdGUoZmFsc2UpOwoKICBjb25zdCBwcm9ncmVzcyA9IHVzZU1lbW8oKCkgPT4gKHN0ZXAgLyAzKSAqIDEwMCwgW3N0ZXBdKTsKCiAgY29uc3Qgb25QaWNrRmlsZXMgPSBhc3luYyAoZmlsZXM6IEZpbGVMaXN0IHwgbnVsbCkgPT4gewogICAgaWYgKCFmaWxlcykgcmV0dXJuOwogICAgY29uc3QgcGlja2VkID0gQXJyYXkuZnJvbShmaWxlcykuc2xpY2UoMCwgMyk7CiAgICB0cnkgewogICAgICBjb25zdCB1cmxzID0gYXdhaXQgUHJvbWlzZS5hbGwocGlja2VkLm1hcChyZWFkQXNEYXRhVXJsKSk7CiAgICAgIGNvbnN0IG5leHQ6IHsgcG9zZTogc3RyaW5nOyB1cmw6IHN0cmluZyB9W10gPSBbXTsKICAgICAgaWYgKHVybHNbMF0pIG5leHQucHVzaCh7IHBvc2U6IHBvc2VBLCB1cmw6IHVybHNbMF0gfSk7CiAgICAgIGlmICh1cmxzWzFdKSBuZXh0LnB1c2goeyBwb3NlOiBwb3NlQiwgdXJsOiB1cmxzWzFdIH0pOwogICAgICBpZiAodXJsc1syXSkgbmV4dC5wdXNoKHsgcG9zZTogIkV4dHJhIiwgdXJsOiB1cmxzWzJdIH0pOwogICAgICBzZXRVcGxvYWRzKG5leHQpOwogICAgfSBjYXRjaCB7CiAgICAgIHRvYXN0LmVycm9yKCJGYWlsZWQgdG8gcmVhZCBzZWxlY3RlZCBwaG90b3MiKTsKICAgIH0KICB9OwoKICBjb25zdCBzdWJtaXQgPSBhc3luYyAoKSA9PiB7CiAgICBpZiAoIXVzZXJJZCkgewogICAgICB0b2FzdC5lcnJvcigiUGxlYXNlIGxvZyBpbiBhZ2FpbiIpOwogICAgICBuYXZpZ2F0ZSgiL2xvZ2luIik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICh1cGxvYWRzLmxlbmd0aCA8IDIpIHsKICAgICAgdG9hc3QuZXJyb3IoIlBsZWFzZSB1cGxvYWQgYXQgbGVhc3QgMiBwaG90b3MiKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIHNldFN1Ym1pdHRpbmcodHJ1ZSk7CiAgICB0cnkgewogICAgICBhd2FpdCBzdWJtaXRWZXJpZmljYXRpb24oewogICAgICAgIHVzZXJJZDogdXNlcklkIGFzIGFueSwKICAgICAgICBwaG90b3M6IHVwbG9hZHMubWFwKCh1KSA9PiAoeyB1cmw6IHUudXJsLCBwb3NlOiB1LnBvc2UgfSkpLAogICAgICB9IGFzIGFueSk7CiAgICAgIHNldFN0ZXAoMyk7CiAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7CiAgICAgIHRvYXN0LmVycm9yKGVycm9yPy5tZXNzYWdlIHx8ICJGYWlsZWQgdG8gc3VibWl0IHZlcmlmaWNhdGlvbiIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgc2V0U3VibWl0dGluZyhmYWxzZSk7CiAgICB9CiAgfTsKCiAgcmV0dXJuICgKICAgIDxkaXYgY2xhc3NOYW1lPSJtaW4taC1zY3JlZW4gYmctYmFja2dyb3VuZCBwYi0yMCI+CiAgICAgIDxkaXYgY2xhc3NOYW1lPSJjb250YWluZXIgbXgtYXV0byBweC0yIHNtOnB4LTMgbWQ6cHgtNCBweS0zIHNtOnB5LTQgbWQ6cHktNiBtYXgtdy0yeGwiPgogICAgICAgIDxDYXJkPgogICAgICAgICAgPENhcmRIZWFkZXI+CiAgICAgICAgICAgIDxDYXJkVGl0bGU+UGhvdG8gdmVyaWZpY2F0aW9uPC9DYXJkVGl0bGU+CiAgICAgICAgICAgIDxDYXJkRGVzY3JpcHRpb24+VmVyaWZ5IHlvdXIgcHJvZmlsZSB0byBidWlsZCB0cnVzdCBhbmQgaW1wcm92ZSB2aXNpYmlsaXR5LjwvQ2FyZERlc2NyaXB0aW9uPgogICAgICAgICAgICA8UHJvZ3Jlc3MgdmFsdWU9e3Byb2dyZXNzfSBjbGFzc05hbWU9Im10LTQiIC8+CiAgICAgICAgICA8L0NhcmRIZWFkZXI+CiAgICAgICAgICA8Q2FyZENvbnRlbnQgY2xhc3NOYW1lPSJzcGFjZS15LTYiPgogICAgICAgICAgICB7c3RlcCA9PT0gMSAmJiAoCiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMyI+CiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQtc20gdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIj4KICAgICAgICAgICAgICAgICAgWW914oCZbGwgdXBsb2FkIDIgc2VsZmllcyBmb2xsb3dpbmcgc2ltcGxlIHBvc2UgcHJvbXB0cy4gWW91ciBzdWJtaXNzaW9uIHdpbGwgYmUgcmV2aWV3ZWQuCiAgICAgICAgICAgICAgICA8L3A+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iZmxleCBnYXAtMiI+CiAgICAgICAgICAgICAgICAgIDxCdXR0b24gb25DbGljaz17KCkgPT4gc2V0U3RlcCgyKX0+U3RhcnQ8L0J1dHRvbj4KICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJvdXRsaW5lIiBvbkNsaWNrPXsoKSA9PiBuYXZpZ2F0ZSgtMSl9PgogICAgICAgICAgICAgICAgICAgIENhbmNlbAogICAgICAgICAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApfQoKICAgICAgICAgICAge3N0ZXAgPT09IDIgJiYgKAogICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTQiPgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMSI+CiAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0iZm9udC1zZW1pYm9sZCI+UG9zZSBwcm9tcHRzPC9wPgogICAgICAgICAgICAgICAgICA8dWwgY2xhc3NOYW1lPSJ0ZXh0LXNtIHRleHQtbXV0ZWQtZm9yZWdyb3VuZCBsaXN0LWRpc2MgcGwtNSI+CiAgICAgICAgICAgICAgICAgICAgPGxpPntwb3NlQX08L2xpPgogICAgICAgICAgICAgICAgICAgIDxsaT57cG9zZUJ9PC9saT4KICAgICAgICAgICAgICAgICAgPC91bD4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJzcGFjZS15LTIiPgogICAgICAgICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICAgICAgICB0eXBlPSJmaWxlIgogICAgICAgICAgICAgICAgICAgIGFjY2VwdD0iaW1hZ2UvKiIKICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZQogICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25QaWNrRmlsZXMoZS50YXJnZXQuZmlsZXMpfQogICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIj5VcGxvYWQgMuKAkzMgcGhvdG9zIChtYXggMykuPC9wPgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAge3VwbG9hZHMubGVuZ3RoID4gMCAmJiAoCiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSJncmlkIGdyaWQtY29scy0zIGdhcC0yIj4KICAgICAgICAgICAgICAgICAgICB7dXBsb2Fkcy5tYXAoKHUsIGlkeCkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgPGRpdiBrZXk9e2lkeH0gY2xhc3NOYW1lPSJzcGFjZS15LTEiPgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0iYXNwZWN0LXNxdWFyZSBvdmVyZmxvdy1oaWRkZW4gcm91bmRlZC1tZCBib3JkZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPXt1LnVybH0gYWx0PXt1LnBvc2V9IGNsYXNzTmFtZT0iaC1mdWxsIHctZnVsbCBvYmplY3QtY292ZXIiIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9InRleHQteHMgdGV4dC1tdXRlZC1mb3JlZ3JvdW5kIHRydW5jYXRlIj57dS5wb3NlfTwvcD4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9ImZsZXggZ2FwLTIiPgogICAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9e3N1Ym1pdH0gZGlzYWJsZWQ9e3N1Ym1pdHRpbmcgfHwgdXBsb2Fkcy5sZW5ndGggPCAyfT4KICAgICAgICAgICAgICAgICAgICB7c3VibWl0dGluZyA/ICJTdWJtaXR0aW5n4oCmIiA6ICJTdWJtaXQifQogICAgICAgICAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJvdXRsaW5lIiBvbkNsaWNrPXsoKSA9PiBuYXZpZ2F0ZSgtMSl9IGRpc2FibGVkPXtzdWJtaXR0aW5nfT4KICAgICAgICAgICAgICAgICAgICBCYWNrCiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICl9CgogICAgICAgICAgICB7c3RlcCA9PT0gMyAmJiAoCiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9InNwYWNlLXktMyI+CiAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9ImZvbnQtc2VtaWJvbGQiPlN1Ym1pdHRlZDwvcD4KICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0idGV4dC1zbSB0ZXh0LW11dGVkLWZvcmVncm91bmQiPgogICAgICAgICAgICAgICAgICBZb3VyIHZlcmlmaWNhdGlvbiBpcyB1bmRlciByZXZpZXcuIFdl4oCZbGwgdXBkYXRlIHlvdXIgc3RhdHVzIGluIFByb2ZpbGUgc2V0dGluZ3MuCiAgICAgICAgICAgICAgICA8L3A+CiAgICAgICAgICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9eygpID0+IG5hdmlnYXRlKCIvcHJvZmlsZS1zZXR1cCIpfT5CYWNrIHRvIHByb2ZpbGU8L0J1dHRvbj4KICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgKX0KICAgICAgICAgIDwvQ2FyZENvbnRlbnQ+CiAgICAgICAgPC9DYXJkPgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0K"}