{"data":"aW1wb3J0IHsgYXBpIH0gZnJvbSAiLi4vLi4vY29udmV4L19nZW5lcmF0ZWQvYXBpIjsKaW1wb3J0IHsgdXNlTXV0YXRpb24gfSBmcm9tICJjb252ZXgvcmVhY3QiOwoKLy8gUmVxdWVzdCBwdXNoIG5vdGlmaWNhdGlvbiBwZXJtaXNzaW9uCmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZXF1ZXN0UHVzaFBlcm1pc3Npb24oKTogUHJvbWlzZTxib29sZWFuPiB7CiAgaWYgKCEoIk5vdGlmaWNhdGlvbiIgaW4gd2luZG93KSkgewogICAgY29uc29sZS53YXJuKCJUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBub3RpZmljYXRpb25zIik7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gPT09ICJncmFudGVkIikgewogICAgcmV0dXJuIHRydWU7CiAgfQoKICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gIT09ICJkZW5pZWQiKSB7CiAgICBjb25zdCBwZXJtaXNzaW9uID0gYXdhaXQgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCk7CiAgICByZXR1cm4gcGVybWlzc2lvbiA9PT0gImdyYW50ZWQiOwogIH0KCiAgcmV0dXJuIGZhbHNlOwp9CgovLyBTaG93IGJyb3dzZXIgbm90aWZpY2F0aW9uCmV4cG9ydCBmdW5jdGlvbiBzaG93QnJvd3Nlck5vdGlmaWNhdGlvbigKICB0aXRsZTogc3RyaW5nLAogIG9wdGlvbnM6IHsKICAgIGJvZHk/OiBzdHJpbmc7CiAgICBpY29uPzogc3RyaW5nOwogICAgaW1hZ2U/OiBzdHJpbmc7CiAgICBiYWRnZT86IHN0cmluZzsKICAgIHRhZz86IHN0cmluZzsKICAgIGRhdGE/OiBhbnk7CiAgICByZXF1aXJlSW50ZXJhY3Rpb24/OiBib29sZWFuOwogIH0gPSB7fQopIHsKICBpZiAoISgiTm90aWZpY2F0aW9uIiBpbiB3aW5kb3cpKSByZXR1cm4gbnVsbDsKICBpZiAoTm90aWZpY2F0aW9uLnBlcm1pc3Npb24gIT09ICJncmFudGVkIikgcmV0dXJuIG51bGw7CgogIGNvbnN0IG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24odGl0bGUsIHsKICAgIC4uLm9wdGlvbnMsCiAgICBiYWRnZTogb3B0aW9ucy5iYWRnZSB8fCAiL2xvZ28uc3ZnIiwKICAgIGljb246IG9wdGlvbnMuaWNvbiB8fCAiL2xvZ28uc3ZnIiwKICB9KTsKCiAgLy8gSGFuZGxlIG5vdGlmaWNhdGlvbiBjbGljawogIG5vdGlmaWNhdGlvbi5vbmNsaWNrID0gKGV2ZW50KSA9PiB7CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgd2luZG93LmZvY3VzKCk7CiAgICAKICAgIGlmIChvcHRpb25zLmRhdGE/LmxpbmspIHsKICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBvcHRpb25zLmRhdGEubGluazsKICAgIH0KICAgIAogICAgbm90aWZpY2F0aW9uLmNsb3NlKCk7CiAgfTsKCiAgcmV0dXJuIG5vdGlmaWNhdGlvbjsKfQoKLy8gU2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIGZvciBwdXNoIChvcHRpb25hbCBQV0EgZmVhdHVyZSkKZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlZ2lzdGVyU2VydmljZVdvcmtlcigpIHsKICBpZiAoISgic2VydmljZVdvcmtlciIgaW4gbmF2aWdhdG9yKSkgcmV0dXJuIG51bGw7CiAgCiAgdHJ5IHsKICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IGF3YWl0IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyLnJlZ2lzdGVyKCIvc3cuanMiKTsKICAgIGNvbnNvbGUubG9nKCJTZXJ2aWNlIFdvcmtlciByZWdpc3RlcmVkOiIsIHJlZ2lzdHJhdGlvbik7CiAgICByZXR1cm4gcmVnaXN0cmF0aW9uOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCJTZXJ2aWNlIFdvcmtlciByZWdpc3RyYXRpb24gZmFpbGVkOiIsIGVycm9yKTsKICAgIHJldHVybiBudWxsOwogIH0KfQo="}