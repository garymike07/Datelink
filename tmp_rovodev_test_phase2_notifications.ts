{"data":"Ly8gUGhhc2UgMiBOb3RpZmljYXRpb24gU3lzdGVtIFRlc3QgU2NyaXB0Ci8vIFRoaXMgc2NyaXB0IGNhbiBiZSB1c2VkIHRvIHRlc3QgdGhlIG5vdGlmaWNhdGlvbiBzeXN0ZW0gaW1wbGVtZW50YXRpb24KCmltcG9ydCB7IGFwaSB9IGZyb20gIi4vY29udmV4L19nZW5lcmF0ZWQvYXBpIjsKCi8qKgogKiBUZXN0IDE6IENyZWF0ZSBhIHRlc3Qgbm90aWZpY2F0aW9uCiAqIFVzYWdlOiBDYWxsIHRoaXMgZnJvbSB5b3VyIGRldiBjb25zb2xlIG9yIGEgdGVzdCBwYWdlCiAqLwpleHBvcnQgYXN5bmMgZnVuY3Rpb24gdGVzdENyZWF0ZU5vdGlmaWNhdGlvbihjb252ZXg6IGFueSwgdXNlcklkOiBzdHJpbmcpIHsKICB0cnkgewogICAgYXdhaXQgY29udmV4Lm11dGF0aW9uKGFwaS5ub3RpZmljYXRpb25zLmNyZWF0ZU5vdGlmaWNhdGlvbiwgewogICAgICB1c2VySWQ6IHVzZXJJZCBhcyBhbnksCiAgICAgIHR5cGU6ICJtYXRjaCIsCiAgICAgIHRpdGxlOiAi8J+OiSBJdCdzIGEgTWF0Y2ghIiwKICAgICAgYm9keTogIllvdSBhbmQgU2FyYWggaGF2ZSBtYXRjaGVkISBTdGFydCBjaGF0dGluZyBub3cuIiwKICAgICAgcHJpb3JpdHk6ICJoaWdoIiwKICAgICAgY2F0ZWdvcnk6ICJzb2NpYWwiLAogICAgICBpbWFnZVVybDogImh0dHBzOi8vdmlhLnBsYWNlaG9sZGVyLmNvbS8xNTAiLAogICAgICBsaW5rOiAiL21hdGNoZXMiLAogICAgICBhY3Rpb25CdXR0b25zOiBbCiAgICAgICAgeyBsYWJlbDogIlNheSBIaSIsIGFjdGlvbjogIm1lc3NhZ2UiLCBsaW5rOiAiL2NoYXQvMTIzIiB9LAogICAgICAgIHsgbGFiZWw6ICJWaWV3IFByb2ZpbGUiLCBhY3Rpb246ICJ2aWV3IiwgbGluazogIi9wcm9maWxlLzEyMyIgfSwKICAgICAgXSwKICAgIH0pOwogICAgY29uc29sZS5sb2coIuKchSBUZXN0IG5vdGlmaWNhdGlvbiBjcmVhdGVkIHN1Y2Nlc3NmdWxseSIpOwogIH0gY2F0Y2ggKGVycm9yKSB7CiAgICBjb25zb2xlLmVycm9yKCLinYwgRXJyb3IgY3JlYXRpbmcgbm90aWZpY2F0aW9uOiIsIGVycm9yKTsKICB9Cn0KCi8qKgogKiBUZXN0IDI6IENyZWF0ZSBtdWx0aXBsZSBub3RpZmljYXRpb25zIHRvIHRlc3QgYWdncmVnYXRpb24KICovCmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0ZXN0QWdncmVnYXRlZE5vdGlmaWNhdGlvbnMoY29udmV4OiBhbnksIHVzZXJJZDogc3RyaW5nKSB7CiAgdHJ5IHsKICAgIC8vIENyZWF0ZSAzIGxpa2Ugbm90aWZpY2F0aW9ucyB3aXRoIHRoZSBzYW1lIGdyb3VwS2V5CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykgewogICAgICBhd2FpdCBjb252ZXgubXV0YXRpb24oYXBpLm5vdGlmaWNhdGlvbnMuY3JlYXRlTm90aWZpY2F0aW9uLCB7CiAgICAgICAgdXNlcklkOiB1c2VySWQgYXMgYW55LAogICAgICAgIHR5cGU6ICJsaWtlIiwKICAgICAgICB0aXRsZTogIk5ldyBMaWtlcyEiLAogICAgICAgIGJvZHk6IGBZb3UgaGF2ZSB7Y291bnR9IG5ldyBsaWtlc2AsCiAgICAgICAgcHJpb3JpdHk6ICJtZWRpdW0iLAogICAgICAgIGNhdGVnb3J5OiAiZW5nYWdlbWVudCIsCiAgICAgICAgZ3JvdXBLZXk6IGBsaWtlc19iYXRjaF8ke3VzZXJJZH1gLAogICAgICAgIGxpbms6ICIvbGlrZXMiLAogICAgICB9KTsKICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpOwogICAgfQogICAgY29uc29sZS5sb2coIuKchSBBZ2dyZWdhdGVkIG5vdGlmaWNhdGlvbnMgY3JlYXRlZCBzdWNjZXNzZnVsbHkiKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcigi4p2MIEVycm9yIGNyZWF0aW5nIGFnZ3JlZ2F0ZWQgbm90aWZpY2F0aW9uczoiLCBlcnJvcik7CiAgfQp9CgovKioKICogVGVzdCAzOiBDcmVhdGUgY3JpdGljYWwgbm90aWZpY2F0aW9uIChzaG91bGQgdHJpZ2dlciBzb3VuZCkKICovCmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0ZXN0Q3JpdGljYWxOb3RpZmljYXRpb24oY29udmV4OiBhbnksIHVzZXJJZDogc3RyaW5nKSB7CiAgdHJ5IHsKICAgIGF3YWl0IGNvbnZleC5tdXRhdGlvbihhcGkubm90aWZpY2F0aW9ucy5jcmVhdGVOb3RpZmljYXRpb24sIHsKICAgICAgdXNlcklkOiB1c2VySWQgYXMgYW55LAogICAgICB0eXBlOiAiY2FsbF9pbmNvbWluZyIsCiAgICAgIHRpdGxlOiAi8J+TniBJbmNvbWluZyBDYWxsIiwKICAgICAgYm9keTogIlNhcmFoIGlzIGNhbGxpbmcgeW91Li4uIiwKICAgICAgcHJpb3JpdHk6ICJjcml0aWNhbCIsCiAgICAgIGNhdGVnb3J5OiAiY2FsbCIsCiAgICAgIGxpbms6ICIvY2FsbC8xMjMiLAogICAgICBhY3Rpb25CdXR0b25zOiBbCiAgICAgICAgeyBsYWJlbDogIkFuc3dlciIsIGFjdGlvbjogImFuc3dlciIsIGxpbms6ICIvY2FsbC8xMjMiIH0sCiAgICAgICAgeyBsYWJlbDogIkRlY2xpbmUiLCBhY3Rpb246ICJkZWNsaW5lIiB9LAogICAgICBdLAogICAgfSk7CiAgICBjb25zb2xlLmxvZygi4pyFIENyaXRpY2FsIG5vdGlmaWNhdGlvbiBjcmVhdGVkIChzaG91bGQgcGxheSBzb3VuZCkiKTsKICB9IGNhdGNoIChlcnJvcikgewogICAgY29uc29sZS5lcnJvcigi4p2MIEVycm9yIGNyZWF0aW5nIGNyaXRpY2FsIG5vdGlmaWNhdGlvbjoiLCBlcnJvcik7CiAgfQp9CgovKioKICogVGVzdCA0OiBUZXN0IGFsbCBub3RpZmljYXRpb24gY2F0ZWdvcmllcwogKi8KZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRlc3RBbGxDYXRlZ29yaWVzKGNvbnZleDogYW55LCB1c2VySWQ6IHN0cmluZykgewogIGNvbnN0IHRlc3ROb3RpZmljYXRpb25zID0gWwogICAgewogICAgICB0eXBlOiAibWF0Y2giLAogICAgICB0aXRsZTogIk5ldyBNYXRjaCIsCiAgICAgIGJvZHk6ICJZb3UgaGF2ZSBhIG5ldyBtYXRjaCEiLAogICAgICBjYXRlZ29yeTogInNvY2lhbCIsCiAgICAgIHByaW9yaXR5OiAiaGlnaCIsCiAgICB9LAogICAgewogICAgICB0eXBlOiAiY2FsbF9taXNzZWQiLAogICAgICB0aXRsZTogIk1pc3NlZCBDYWxsIiwKICAgICAgYm9keTogIllvdSBtaXNzZWQgYSBjYWxsIGZyb20gSm9obiIsCiAgICAgIGNhdGVnb3J5OiAiY2FsbCIsCiAgICAgIHByaW9yaXR5OiAibWVkaXVtIiwKICAgIH0sCiAgICB7CiAgICAgIHR5cGU6ICJwYXltZW50X3N1Y2Nlc3MiLAogICAgICB0aXRsZTogIlBheW1lbnQgU3VjY2Vzc2Z1bCIsCiAgICAgIGJvZHk6ICJZb3VyIHByZW1pdW0gc3Vic2NyaXB0aW9uIGlzIG5vdyBhY3RpdmUiLAogICAgICBjYXRlZ29yeTogInBheW1lbnQiLAogICAgICBwcmlvcml0eTogImhpZ2giLAogICAgfSwKICAgIHsKICAgICAgdHlwZTogInByb2ZpbGVfdmlld2VkIiwKICAgICAgdGl0bGU6ICJQcm9maWxlIFZpZXdzIiwKICAgICAgYm9keTogIjUgcGVvcGxlIHZpZXdlZCB5b3VyIHByb2ZpbGUgdG9kYXkiLAogICAgICBjYXRlZ29yeTogImVuZ2FnZW1lbnQiLAogICAgICBwcmlvcml0eTogImxvdyIsCiAgICB9LAogICAgewogICAgICB0eXBlOiAidmVyaWZpY2F0aW9uX2NvbXBsZXRlIiwKICAgICAgdGl0bGU6ICJWZXJpZmljYXRpb24gQ29tcGxldGUiLAogICAgICBib2R5OiAiWW91ciBwcm9maWxlIGlzIG5vdyB2ZXJpZmllZCEiLAogICAgICBjYXRlZ29yeTogInN5c3RlbSIsCiAgICAgIHByaW9yaXR5OiAibWVkaXVtIiwKICAgIH0sCiAgXTsKCiAgZm9yIChjb25zdCBub3RpZiBvZiB0ZXN0Tm90aWZpY2F0aW9ucykgewogICAgdHJ5IHsKICAgICAgYXdhaXQgY29udmV4Lm11dGF0aW9uKGFwaS5ub3RpZmljYXRpb25zLmNyZWF0ZU5vdGlmaWNhdGlvbiwgewogICAgICAgIHVzZXJJZDogdXNlcklkIGFzIGFueSwKICAgICAgICAuLi5ub3RpZiwKICAgICAgfSBhcyBhbnkpOwogICAgICBjb25zb2xlLmxvZyhg4pyFIENyZWF0ZWQgJHtub3RpZi5jYXRlZ29yeX0gbm90aWZpY2F0aW9uYCk7CiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAyMDApKTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBFcnJvciBjcmVhdGluZyAke25vdGlmLmNhdGVnb3J5fSBub3RpZmljYXRpb246YCwgZXJyb3IpOwogICAgfQogIH0KfQoKLyoqCiAqIEluc3RydWN0aW9uczoKICogCiAqIDEuIE9wZW4geW91ciBicm93c2VyIGNvbnNvbGUgb24gdGhlIGFwcAogKiAyLiBJbXBvcnQgdGhpcyBzY3JpcHQgb3IgY29weSB0aGUgZnVuY3Rpb25zCiAqIDMuIEdldCB0aGUgQ29udmV4IGNsaWVudCBhbmQgdXNlciBJRDoKICogICAgY29uc3QgY29udmV4ID0gd2luZG93Ll9fY29udmV4Q2xpZW50OyAvLyBvciBob3dldmVyIHlvdSBhY2Nlc3MgaXQKICogICAgY29uc3QgdXNlcklkID0gInlvdXItdXNlci1pZCI7CiAqIAogKiA0LiBSdW4gdGVzdHM6CiAqICAgIHRlc3RDcmVhdGVOb3RpZmljYXRpb24oY29udmV4LCB1c2VySWQpOwogKiAgICB0ZXN0QWdncmVnYXRlZE5vdGlmaWNhdGlvbnMoY29udmV4LCB1c2VySWQpOwogKiAgICB0ZXN0Q3JpdGljYWxOb3RpZmljYXRpb24oY29udmV4LCB1c2VySWQpOwogKiAgICB0ZXN0QWxsQ2F0ZWdvcmllcyhjb252ZXgsIHVzZXJJZCk7CiAqIAogKiA1LiBWZXJpZnk6CiAqICAgIC0gTm90aWZpY2F0aW9uIGJlbGwgc2hvd3MgdW5yZWFkIGNvdW50CiAqICAgIC0gQ2xpY2tpbmcgYmVsbCBvcGVucyBub3RpZmljYXRpb24gZHJvcGRvd24KICogICAgLSBDYXRlZ29yeSB0YWJzIHNob3cgY29ycmVjdCBjb3VudHMKICogICAgLSBUb2FzdCBhcHBlYXJzIGZvciBoaWdoL2NyaXRpY2FsIHByaW9yaXR5CiAqICAgIC0gU291bmQgcGxheXMgZm9yIGNyaXRpY2FsIG5vdGlmaWNhdGlvbnMKICogICAgLSBCcm93c2VyIG5vdGlmaWNhdGlvbnMgd29yayB3aGVuIHRhYiBpcyBub3QgZm9jdXNlZAogKi8K"}